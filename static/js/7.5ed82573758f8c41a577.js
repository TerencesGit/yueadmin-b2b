webpackJsonp([7],{1329:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(339),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=a(52),l=["每周日","每周一","每周二","每周三","每周四","每周五","每周六"];t.default={data:function(){return{wareId:"",skuList:[],loading:!1,batchSkuVisible:!1,singleSkuVisible:!1,batchType:1,singleType:1,batchSkuForm:{wareId:"",stockId:"",startDate:"",endDate:"",skuDate:"",storageNum:"",adultPrice:"",childPrice:"",singlePrice:"",skuDateRange:[],wareType:1},singleSkuForm:{wareId:"",skuId:"",skuDate:"",storageNum:"",adultPrice:"",childPrice:"",singlePrice:"",wareType:1},rules:{storageNum:[{type:"number",required:!0,message:"请输入有效库存",trigger:"blur"}],adultPrice:[{type:"number",required:!0,message:"请输入有效成人价",trigger:"blur"}],childPrice:[{type:"number",required:!0,message:"请输入有效儿童价",trigger:"blur"}],singlePrice:[{type:"number",required:!0,message:"请输入有效单人补差价",trigger:"blur"}],skuDateRange:[{type:"array",required:!0,message:"请选择起止日期",trigger:"change"}],checkedWeeks:[{type:"array",required:!0,message:"至少勾选一项",trigger:"change"}]},pickerOptions:{shortcuts:[{text:"未来一周",onClick:function(e){var t=new Date,a=new Date;t.setTime(a.getTime()+6048e5),e.$emit("pick",[a,t])}},{text:"未来一个月",onClick:function(e){var t=new Date,a=new Date;t.setTime(a.getTime()+2592e6),e.$emit("pick",[a,t])}},{text:"未来三个月",onClick:function(e){var t=new Date,a=new Date;t.setTime(a.getTime()+7776e6),e.$emit("pick",[a,t])}}]},weeks:l}},methods:{getSkuList:function(){var e=this;this.loading=!0,(0,s.readSkuInfoList)({wareId:this.wareId}).then(function(t){e.loading=!1,"0001"===t.data.code?(e.skuList=t.data.result.skuList,e.skuList.forEach(function(e){e.start=e.skuDate})):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.loading=!1,e.$catchError(t)})},dateChange:function(e){this.batchSkuForm.skuDateRange=e?e.split(" - "):[]},handleCheckedChange:function(e){var t=[0,0,0,0,0,0,0];e.forEach(function(e,a){t[e]=1});var a=t.join("");a="0000000"===a?"1111111":a,console.log(a)},changeMonth:function(e,t,a){},handleBatchAdd:function(){this.batchType=1,this.batchSkuForm.storageNum="",this.batchSkuVisible=!0},handleBatchEdit:function(){this.batchType=2,this.batchSkuForm.storageNum=0,this.batchSkuVisible=!0},batchSubmit:function(){var e=this;this.$refs.batchSkuForm.validate(function(t){if(t){if(e.batchSkuForm.startDate=e.batchSkuForm.skuDateRange[0],e.batchSkuForm.endDate=e.batchSkuForm.skuDateRange[1],!e.batchSkuForm.startDate)return void e.$notify({type:"warning",title:"提示",message:"请选择起止日期"});var a=(0,r.default)({},e.batchSkuForm);if(a.wareId=e.wareId,console.log(a),1===e.batchType)(0,s.createSkuInfoBatch)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getSkuList()):e.$message.error(t.data.message)}).catch(function(e){console.log(e)});else{if(2!==e.batchType)return void console.log("error");(0,s.updateSkuInfoBatch)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getSkuList()):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})}e.batchSkuVisible=!1,e.$refs.batchSkuForm.resetFields()}else console.log("err submit")})},dayClick:function(e,t){e=this.$moment(e).format("YYYY-MM-DD"),t?(this.singleType=2,this.singleSkuForm=(0,r.default)(this.singleSkuForm,t)):(this.singleType=1,this.singleSkuForm={},this.singleSkuForm.skuDate=e),this.singleSkuVisible=!0},singleSubmit:function(){var e=this;this.$refs.singleSkuForm.validate(function(t){if(t){var a={wareId:e.wareId,skuId:e.singleSkuForm.skuId,skuDate:e.singleSkuForm.skuDate,adultPrice:e.singleSkuForm.adultPrice,childPrice:e.singleSkuForm.childPrice,singlePrice:e.singleSkuForm.singlePrice,storageNum:e.singleSkuForm.storageNum,wareType:1};console.log(a),(0,s.saveSkuInfo)(a).then(function(t){"0001"===t.data.code?(e.$message.success(t.data.message),e.getSkuList()):e.$message.error(t.data.message),e.singleSkuVisible=!1}).catch(function(e){console.log(e)})}else console.log("err submit")})},handleNext:function(){this.$router.push("service?wareId="+this.wareId)}},mounted:function(){this.$store.dispatch("setStepActive",4),this.wareId=this.$route.query.wareId,this.wareId&&this.getSkuList()}}},1369:function(e,t,a){t=e.exports=a(736)(),t.push([e.i,".input-width-control .el-input[data-v-b37c9a0e]{width:220px}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/provider/ware/wareInput/storage.vue"],names:[],mappings:"AACA,gDACE,WAAa,CACd",file:"storage.vue",sourcesContent:["\n.input-width-control .el-input[data-v-b37c9a0e] {\n  width: 220px;\n}\n"],sourceRoot:""}])},1415:function(e,t,a){var i=a(1369);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(737)("0ca0bfa0",i,!0)},1487:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleBatchAdd}},[e._v("批量新增")]),e._v(" "),e.skuList.length>0?a("el-button",{attrs:{type:"primary"},on:{click:e.handleBatchEdit}},[e._v("批量编辑")]):e._e()],1),e._v(" "),a("full-calendar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{events:e.skuList,"first-day":"0"},on:{changeMonth:e.changeMonth,dayClick:e.dayClick,eventClick:e.dayClick}}),e._v(" "),a("el-row",{staticClass:"toolbar text-center"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("下一步")])],1),e._v(" "),a("el-dialog",{attrs:{title:"库存价格批量设置（价格单位：元）"},model:{value:e.batchSkuVisible,callback:function(t){e.batchSkuVisible=t},expression:"batchSkuVisible"}},[a("el-form",{ref:"batchSkuForm",staticClass:"input-width-control",attrs:{model:e.batchSkuForm,rules:e.rules,"label-width":"220px"}},[a("el-form-item",{attrs:{label:"起止日期：",prop:"skuDateRange"}},[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择起止日期",clearable:!1,"picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.batchSkuForm.skuDateRange,callback:function(t){e.batchSkuForm.skuDateRange=t},expression:"batchSkuForm.skuDateRange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"成人价：",prop:"adultPrice"}},[a("el-input",{attrs:{placeholder:"输入成人价"},model:{value:e.batchSkuForm.adultPrice,callback:function(t){e.batchSkuForm.adultPrice=e._n(t)},expression:"batchSkuForm.adultPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"儿童价：",prop:"childPrice"}},[a("el-input",{attrs:{placeholder:"输入儿童价"},model:{value:e.batchSkuForm.childPrice,callback:function(t){e.batchSkuForm.childPrice=e._n(t)},expression:"batchSkuForm.childPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单人差：",prop:"singlePrice"}},[a("el-input",{attrs:{placeholder:"输入单人差"},model:{value:e.batchSkuForm.singlePrice,callback:function(t){e.batchSkuForm.singlePrice=e._n(t)},expression:"batchSkuForm.singlePrice"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.batchType,expression:"batchType === 1"}],attrs:{label:"库存：",prop:"storageNum"}},[a("el-input",{attrs:{placeholder:"输入库存数量"},model:{value:e.batchSkuForm.storageNum,callback:function(t){e.batchSkuForm.storageNum=e._n(t)},expression:"batchSkuForm.storageNum"}})],1)],1),e._v(" "),a("div",{slot:"footer"},[a("el-button",{on:{click:function(t){e.batchSkuVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.batchSubmit}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"库存价格设置（价格单位：元）",visible:e.singleSkuVisible},on:{"update:visible":function(t){e.singleSkuVisible=t}}},[a("el-form",{ref:"singleSkuForm",staticClass:"input-width-control",attrs:{model:e.singleSkuForm,rules:e.rules,"label-width":"220px"}},[a("el-form-item",{attrs:{label:"日期："}},[a("span",{staticStyle:{"font-size":"18px"},domProps:{textContent:e._s(e.singleSkuForm.skuDate)}})]),e._v(" "),a("el-form-item",{attrs:{label:"成人价：",prop:"adultPrice"}},[a("el-input",{attrs:{placeholder:"输入成人价"},model:{value:e.singleSkuForm.adultPrice,callback:function(t){e.singleSkuForm.adultPrice=e._n(t)},expression:"singleSkuForm.adultPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"儿童价：",prop:"childPrice"}},[a("el-input",{attrs:{placeholder:"输入儿童价"},model:{value:e.singleSkuForm.childPrice,callback:function(t){e.singleSkuForm.childPrice=e._n(t)},expression:"singleSkuForm.childPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单人差：",prop:"singlePrice"}},[a("el-input",{attrs:{placeholder:"输入单人差"},model:{value:e.singleSkuForm.singlePrice,callback:function(t){e.singleSkuForm.singlePrice=e._n(t)},expression:"singleSkuForm.singlePrice"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.singleType,expression:"singleType === 1"}],attrs:{label:"库存：",prop:"storageNum"}},[a("el-input",{attrs:{placeholder:"输入库存数量"},model:{value:e.singleSkuForm.storageNum,callback:function(t){e.singleSkuForm.storageNum=e._n(t)},expression:"singleSkuForm.storageNum"}})],1)],1),e._v(" "),a("div",{slot:"footer"},[a("el-button",{on:{click:function(t){e.singleSkuVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.singleSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},810:function(e,t,a){a(1415);var i=a(7)(a(1329),a(1487),"data-v-b37c9a0e",null);e.exports=i.exports}});
//# sourceMappingURL=7.5ed82573758f8c41a577.js.map