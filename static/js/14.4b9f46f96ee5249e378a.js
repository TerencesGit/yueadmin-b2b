webpackJsonp([14],{1326:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(339),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=a(52);t.default={data:function(){return{wareId:"",activityFormTitle:"",loading:!1,activityFormVisible:!1,activityList:[],wareForm:{wareId:"",wareName:"",briefName:"",keyWords:"",wareDesc:"",suggestedPrice:"",parentId:""},rules:{wareName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],briefName:[{required:!0,message:"请输入活动缩略名",trigger:"blur"}],wareDesc:[{required:!0,message:"请输入活动描述",trigger:"blur"}]}}},methods:{formatUpdateTime:function(e){return e.updateTime&&this.$moment(e.updateTime).format("YYYY-MM-DD HH:mm:ss")},getActivityList:function(){var e=this,t={parentId:this.wareId};this.loading=!0,(0,o.readWareActivity)(t).then(function(t){e.loading=!1,"0001"===t.data.code?e.activityList=t.data.result.wareActivityList:e.$message.error(t.data.message)}).catch(function(t){e.loading=!1,console.log(t)})},handleAdd:function(){this.wareForm={},this.activityFormTitle="新增推荐活动",this.activityFormVisible=!0},handleEdit:function(e){this.wareForm=(0,i.default)({},e),this.activityFormTitle="编辑推荐活动",this.activityFormVisible=!0},onSubmit:function(){var e=this;this.$refs.wareForm.validate(function(t){if(!t)return e.$message.error("表单输入有误"),!1;var a={wareId:"",wareName:"",briefName:"",keyWords:"",wareDesc:"",suggestedPrice:"",parentId:"",openDate:"",closeDate:"",srcCityCode:"",dstCityCode:"",brandId:"",tripDays:"",sellPreDays:"",nocashReserveMinute:""},r=(0,i.default)(a,e.wareForm);r.parentId=e.wareId,(0,o.saveWareActivityInfo)(r).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getActivityList()):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.$catchError(t)}),e.activityFormVisible=!1})},handleShelf:function(e){console.log((0,i.default)({},e));var t={wareId:e.wareId};(0,o.updateWareUpDownStatus)(t).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},handleSkuSet:function(e){this.$router.push({path:"/provider/ware/activitySkuSet?wareId="+e})},backList:function(){this.$router.push("/provider/ware/wareManage")},submitVerify:function(){var e=this;this.$confirm("确定将该商品提交审核？","提示",{type:"warning"}).then(function(){(0,o.updateVerifyStatus)({wareId:e.wareId}).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.$router.push("/provider/ware/wareManage")):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.$catchError(t)})}).catch(function(e){console.log(e)})}},mounted:function(){this.$store.dispatch("setStepActive",6);var e=parseInt(this.$route.query.wareId);e?(this.wareForm.parentId=this.wareId=e,this.getActivityList()):this.$router.push("base")}}},1351:function(e,t,a){t=e.exports=a(741)(),t.push([e.i,".el-card[data-v-2f2cbfaa]{margin:15px}.el-card__body[data-v-2f2cbfaa]{padding:30px}.input-width .el-input[data-v-2f2cbfaa]{width:240px}.input-unit[data-v-2f2cbfaa]{margin-left:5px;vertical-align:top}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/provider/ware/wareInput/activityEdit.vue"],names:[],mappings:"AACA,0BACC,WAAa,CACb,AACD,gCACC,YAAc,CACd,AACD,wCACC,WAAa,CACb,AACD,6BACC,gBAAiB,AACjB,kBAAoB,CACpB",file:"activityEdit.vue",sourcesContent:["\n.el-card[data-v-2f2cbfaa] {\n\tmargin: 15px;\n}\n.el-card__body[data-v-2f2cbfaa] {\n\tpadding: 30px;\n}\n.input-width .el-input[data-v-2f2cbfaa] {\n\twidth: 240px;\n}\n.input-unit[data-v-2f2cbfaa] {\n\tmargin-left: 5px;\n\tvertical-align: top;\n}\n"],sourceRoot:""}])},1397:function(e,t,a){var r=a(1351);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(742)("53545f82",r,!0)},1446:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增推荐活动")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.backList}},[e._v("返回商品列表")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitVerify}},[e._v("提交审核")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.activityList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareCode",label:"活动ID",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareName",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareDesc",label:"活动描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180px",formatter:e.formatUpdateTime}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handleSkuSet(t.row.wareId)}}},[e._v("库存价格")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.activityFormVisible,title:e.activityFormTitle},on:{"update:visible":function(t){e.activityFormVisible=t}}},[a("el-form",{ref:"wareForm",staticClass:"form-item-width",attrs:{model:e.wareForm,rules:e.rules,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动名称",prop:"wareName"}},[a("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.wareForm.wareName,callback:function(t){e.wareForm.wareName=t},expression:"wareForm.wareName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"缩略名",prop:"briefName"}},[a("el-input",{attrs:{placeholder:"缩略名"},model:{value:e.wareForm.briefName,callback:function(t){e.wareForm.briefName=t},expression:"wareForm.briefName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"建议售价",prop:"suggestedPrice"}},[a("el-input",{attrs:{placeholder:"建议售价"},model:{value:e.wareForm.suggestedPrice,callback:function(t){e.wareForm.suggestedPrice=e._n(t)},expression:"wareForm.suggestedPrice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"关键字",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"关键字以英文逗号分隔"},model:{value:e.wareForm.keyWords,callback:function(t){e.wareForm.keyWords=t},expression:"wareForm.keyWords"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"活动描述：",prop:"wareDesc"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.wareForm.wareDesc,callback:function(t){e.wareForm.wareDesc=t},expression:"wareForm.wareDesc"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.activityFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},807:function(e,t,a){a(1397);var r=a(7)(a(1326),a(1446),"data-v-2f2cbfaa",null);e.exports=r.exports}});
//# sourceMappingURL=14.4b9f46f96ee5249e378a.js.map