webpackJsonp([3],{1311:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(339),o=n(r),l=a(905),s=n(l),i=a(52);t.default={data:function(){return{uploadUrl:"https://jsonplaceholder.typicode.com/posts/",previewImgUrl:"",previewVisible:!1,brandList:[(0,s.default)({brandId:100,brandName:"商品品牌管理",logoUrl:"https://avatars0.githubusercontent.com/u/26806103?v=3&s=460",brandPage:"",status:1,content:"品牌描述"},"brandPage","https://avatars0.githubusercontent.com")],pageNo:1,pageSize:10,total:0,uploading:!1,loading:!1,sels:[],filters:{name:""},brandFormVisible:!1,visibleTitle:"",brandForm:{brandName:"",content:"",logoUrl:"",brandPage:"",status:1},brandRules:{brandName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:2,message:"描述不少于 20 个字符",trigger:"blur"}],logoUrl:[{required:!0,message:"请上传品牌LOGO",trigger:"blur"}]}}},methods:{getBrandList:function(){var e=this;this.loading=!0;var t={brandName:this.filters.name,currPage:this.pageNo,pageSize:this.pageSize};(0,i.readBrandList)(t).then(function(t){if("0001"===t.data.code){var a=t.data.result;e.total=a.pageInfo.count,e.brandList=a.brandInfo}else e.$message.error(t.data.message);e.loading=!1}).catch(function(t){e.loading=!1,e.$catchError(t)})},handleSizeChange:function(e){this.pageSize=e,this.getBrandList()},handleCurrentChange:function(e){this.pageNo=e,this.getBrandList()},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("品牌LOGO只能是 JPG 或 PNG 格式!"),a||this.$message.error("品牌LOGO大小不能超过 2MB!"),t&&a},handleProgress:function(e,t){this.uploading=!0},handleSuccess:function(e,t){console.log(e,t),this.uploading=!1,this.brandForm.logoUrl=t.url},handleError:function(e,t){console.log(e),this.uploading=!1,this.$message.error("上传失败")},handleAdd:function(){this.visibleTitle="新增品牌",this.brandForm={brandName:"",content:"",logoUrl:"",brandPage:"",status:1},this.brandFormVisible=!0},handleEdit:function(e,t){this.visibleTitle="品牌编辑",this.brandForm=(0,o.default)({},t),this.brandFormVisible=!0},submitForm:function(){var e=this;this.$refs.brandForm.validate(function(t){if(t){var a=(0,o.default)({},e.brandForm);(0,i.saveBrandInfo)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getBrandList()):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.$catchError(t)}),e.brandFormVisible=!1}else console.log("err submit")})},handleChange:function(e){var t=this;(0,i.updateBrandStatus)({brandId:e.brandId}).then(function(e){"0001"===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message)}).catch(function(e){console.log(e)})},selsChange:function(e){this.sels=e},handleDel:function(e){var t=this;console.log(e),this.$confirm("此操作将删除该品牌, 是否继续?","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var a={brandId:e};(0,i.deleteBrandInfo)(a).then(function(e){console.log(e),"0001"===e.data.code?(t.$message.success(e.data.message),t.getBrandList()):t.$message.error(e.data.message)})}).catch(function(e){console.log(e),t.$message.info("取消操作")})},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.brandId}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={ids:t};(0,i.batchDelBrand)(a).then(function(t){e.listLoading=!1,e.$message.success("删除成功"),e.getBrandList()})}).catch(function(t){console.log(t),e.listLoading=!1,e.$message.info("已取消操作")})},viewImage:function(e){this.previewImgUrl=e,this.previewVisible=!0}},mounted:function(){this.getBrandList()}}},1443:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"toolbar"},[a("el-form",{attrs:{inline:!0,model:e.filters},on:{submit:function(t){t.preventDefault(),e.getBrandList(t)}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"品牌名称",icon:"search"},model:{value:e.filters.name,callback:function(t){e.filters.name=t},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getBrandList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增品牌")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.brandList,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"logoUrl",label:"Logo",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticClass:"cell-img",attrs:{src:t.row.logoUrl,height:"50px"},on:{click:function(a){e.viewImage(t.row.logoUrl)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"专题页"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.brandPage?a("span",[e._v(e._s(t.row.brandPage))]):a("span",[e._v("未设置")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateBy",label:"更新者",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","on-value":1,"off-value":0,"on-text":"启用","off-text":"禁用"},on:{change:function(a){e.handleChange(t.row)}},model:{value:t.row.status,callback:function(e){t.row.status=e},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDel(t.row.brandId)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticClass:"pull-right",attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.visibleTitle,visible:e.brandFormVisible},on:{"update:visible":function(t){e.brandFormVisible=t}}},[a("el-form",{ref:"brandForm",staticStyle:{padding:"30px"},attrs:{model:e.brandForm,rules:e.brandRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"brandName"}},[a("el-input",{attrs:{placeholder:"品牌名称"},model:{value:e.brandForm.brandName,callback:function(t){e.brandForm.brandName=t},expression:"brandForm.brandName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"LOGO",prop:"logoUrl"}},[a("el-upload",{staticClass:"uploader",attrs:{name:"fileName",data:{fileUrlType:2},accept:"image/jpeg, image/png",action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-progress":e.handleProgress}},[e.brandForm.logoUrl?a("img",{staticClass:"upload-image",attrs:{src:e.brandForm.logoUrl}}):a("i",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"el-icon-plus"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌描述",prop:"content"}},[a("el-input",{attrs:{type:"textarea",placeholder:"品牌描述"},model:{value:e.brandForm.content,callback:function(t){e.brandForm.content=t},expression:"brandForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌专题页",prop:"brandPage"}},[a("el-input",{attrs:{placeholder:"URL地址"},model:{value:e.brandForm.brandPage,callback:function(t){e.brandForm.brandPage=t},expression:"brandForm.brandPage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","on-value":1,"off-value":0,"on-text":"启用","off-text":"禁用"},model:{value:e.brandForm.status,callback:function(t){e.brandForm.status=t},expression:"brandForm.status"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.brandFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.submitForm(t)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.previewVisible,size:"tiny"},on:{"update:visible":function(t){e.previewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.previewImgUrl}})])],1)},staticRenderFns:[]}},792:function(e,t,a){var n=a(7)(a(1311),a(1443),null,null);e.exports=n.exports},904:function(e,t,a){e.exports={default:a(906),__esModule:!0}},905:function(e,t,a){"use strict";t.__esModule=!0;var n=a(904),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},906:function(e,t,a){a(907);var n=a(37).Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},907:function(e,t,a){var n=a(71);n(n.S+n.F*!a(63),"Object",{defineProperty:a(64).f})}});
//# sourceMappingURL=3.54d409b1ce5b4267af98.js.map