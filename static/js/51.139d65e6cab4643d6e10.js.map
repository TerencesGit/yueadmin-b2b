{"version":3,"sources":["webpack:///static/js/51.139d65e6cab4643d6e10.js","webpack:///./src/pages/provider/ware/wareInput/multimedia.vue","webpack:///multimedia.vue","webpack:///./src/pages/provider/ware/wareInput/multimedia.vue?128c"],"names":["webpackJsonp","765","module","exports","__webpack_require__","Component","849","Object","defineProperty","value","_api","default","data","wareId","maxLength","previewImgUrl","uploadVisible","previewVisible","fileList","mediaList","fileId","isMainPic","status","fileIdList","sels","uploadData","fileUrlType","loading","methods","formatIsMainPic","row","column","formatCreateTime","this","$moment","createTime","format","getWareFileList","_this","params","readWareFileList","then","res","console","log","code","result","$message","error","message","catch","catchError","response","beforeUpload","file","isJPG","type","isLt2M","size","handleSuccess","resFile","path","filePath","push","handleError","err","handleRemove","filter","handleImgPreview","url","onSubmit","_this2","mediaForm","createWareFile","success","$refs","uploadMedia","clearFiles","selsChange","viewImage","handleStatus","_this3","updatetWareFileState","handleSingleDelete","_this4","_fileIdList","$confirm","deleteWareFile","batchRemove","_this5","fileIds","map","sel","forEach","key","handleSetMainImg","_this6","$notify","title","updateWareFileIsMainPic","handleNext","$router","computed","mediaLength","length","mounted","$store","dispatch","parseInt","$route","query","981","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","$event","_v","disabled","directives","name","rawName","expression","staticStyle","width","border","highlight-current-row","selection-change","label","scopedSlots","_u","fn","scope","src","height","prop","formatter","sortable","on-color","off-color","on-text","off-text","on-value","off-value","change","model","callback","$$v","visible","update:visible","class","text-danger","span","_s","ref","action","list-type","accept","on-preview","on-remove","before-upload","on-success","on-error","multiple","slot","staticRenderFns"],"mappings":"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","file":"static/js/51.139d65e6cab4643d6e10.js","sourcesContent":["webpackJsonp([51],{\n\n/***/ 765:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(10)(\n  /* script */\n  __webpack_require__(849),\n  /* template */\n  __webpack_require__(981),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 849:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _api = __webpack_require__(70);\n\nexports.default = {\n\tdata: function data() {\n\t\treturn {\n\t\t\twareId: '',\n\t\t\tmaxLength: 10,\n\t\t\tpreviewImgUrl: '',\n\t\t\tuploadVisible: false,\n\t\t\tpreviewVisible: false,\n\t\t\tfileList: [],\n\t\t\tmediaList: [{\n\t\t\t\tfileId: 100001,\n\t\t\t\tisMainPic: 1,\n\t\t\t\tstatus: 1\n\t\t\t}, {\n\t\t\t\tfileId: 100002,\n\t\t\t\tisMainPic: 0,\n\t\t\t\tstatus: 0\n\t\t\t}],\n\t\t\tfileIdList: [],\n\t\t\tsels: [],\n\t\t\tuploadData: {\n\t\t\t\tfileUrlType: 1\n\t\t\t},\n\t\t\tloading: false\n\t\t};\n\t},\n\n\tmethods: {\n\t\tformatIsMainPic: function formatIsMainPic(row, column) {\n\t\t\treturn row.isMainPic === 1 ? '是' : '否';\n\t\t},\n\t\tformatCreateTime: function formatCreateTime(row, column) {\n\t\t\treturn this.$moment(row.createTime).format('YYYY-MM-DD HH:mm:ss');\n\t\t},\n\t\tgetWareFileList: function getWareFileList() {\n\t\t\tvar _this = this;\n\n\t\t\tthis.loading = true;\n\t\t\tvar params = {\n\t\t\t\twareId: this.wareId\n\t\t\t};\n\t\t\t(0, _api.readWareFileList)(params).then(function (res) {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (res.data.code === '0001') {\n\t\t\t\t\t_this.mediaList = res.data.result.fileList;\n\t\t\t\t} else {\n\t\t\t\t\t_this.$message.error(res.data.message);\n\t\t\t\t}\n\t\t\t\t_this.loading = false;\n\t\t\t}).catch(function (error) {\n\t\t\t\t_this.loading = false;\n\t\t\t\t_this.catchError(error.response);\n\t\t\t});\n\t\t},\n\t\tbeforeUpload: function beforeUpload(file) {\n\t\t\tvar isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n\t\t\tvar isLt2M = file.size / 1024 / 1024 < 2;\n\t\t\tif (!isJPG) {\n\t\t\t\tthis.$message.error('图片只能是 JPG 或 PNG格式!');\n\t\t\t}\n\t\t\tif (!isLt2M) {\n\t\t\t\tthis.$message.error('图片大小不能超过 2MB!');\n\t\t\t}\n\t\t\treturn isJPG && isLt2M;\n\t\t},\n\t\thandleSuccess: function handleSuccess(res, file) {\n\t\t\tif (res.code === '0001') {\n\t\t\t\tvar resFile = res.result.file;\n\t\t\t\tfile.path = resFile.filePath;\n\t\t\t\tthis.fileList.push(resFile);\n\t\t\t} else {\n\t\t\t\tthis.$message.error(res.message);\n\t\t\t}\n\t\t},\n\t\thandleError: function handleError(err, file) {\n\t\t\tconsole.log(file);\n\t\t\tthis.$message.error('图片上传失败，请重试');\n\t\t},\n\t\thandleRemove: function handleRemove(file) {\n\t\t\tif (!file) return;\n\t\t\tvar fileList = this.fileList;\n\t\t\tvar filePath = file.path || '';\n\t\t\tfileList = fileList.filter(function (file) {\n\t\t\t\treturn file.filePath !== filePath;\n\t\t\t});\n\t\t\tthis.fileList = fileList;\n\t\t},\n\t\thandleImgPreview: function handleImgPreview(file, fileList) {\n\t\t\tthis.previewImgUrl = file.url;\n\t\t\tthis.previewVisible = true;\n\t\t},\n\t\tonSubmit: function onSubmit() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar mediaForm = {\n\t\t\t\twareId: this.wareId,\n\t\t\t\tfileList: this.fileList\n\t\t\t};\n\n\t\t\t(0, _api.createWareFile)(mediaForm).then(function (res) {\n\t\t\t\tif (res.data.code === '0001') {\n\t\t\t\t\t_this2.$message.success('上传成功');\n\t\t\t\t\t_this2.getWareFileList();\n\t\t\t\t} else {\n\t\t\t\t\t_this2.$message.error(res.data.message);\n\t\t\t\t}\n\t\t\t\t_this2.uploadVisible = false;\n\t\t\t\t_this2.fileList = [];\n\t\t\t\t_this2.$refs.uploadMedia.clearFiles();\n\t\t\t}).catch(function (error) {\n\t\t\t\t_this2.catchError(error.response);\n\t\t\t\t_this2.uploadVisible = false;\n\t\t\t\t_this2.fileList = [];\n\t\t\t\t_this2.$refs.uploadMedia.clearFiles();\n\t\t\t});\n\t\t},\n\t\tselsChange: function selsChange(sels) {\n\t\t\tthis.sels = sels;\n\t\t},\n\t\tviewImage: function viewImage(filePath) {\n\t\t\tthis.previewImgUrl = filePath;\n\t\t\tthis.previewVisible = true;\n\t\t},\n\t\thandleStatus: function handleStatus(row) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar data = {\n\t\t\t\tfileId: row.fileId\n\t\t\t};\n\t\t\t(0, _api.updatetWareFileState)(data).then(function (res) {\n\t\t\t\tif (res.data.code === '0001') {\n\t\t\t\t\t_this3.$message.success(res.data.message);\n\t\t\t\t} else {\n\t\t\t\t\trow.status = row.status === 1 ? 0 : 1;\n\t\t\t\t\t_this3.$message.error(res.data.message);\n\t\t\t\t}\n\t\t\t}).catch(function (error) {\n\t\t\t\trow.status = row.status === 1 ? 0 : 1;\n\t\t\t\t_this3.catchError(error.response);\n\t\t\t});\n\t\t},\n\t\thandleSingleDelete: function handleSingleDelete(row) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar _fileIdList = [];\n\t\t\t_fileIdList[0] = { fileId: row.fileId };\n\t\t\tthis.$confirm('确认删除该图片？', '提示', { type: 'warning' }).then(function () {\n\t\t\t\tvar data = {\n\t\t\t\t\tfileIdList: _fileIdList\n\t\t\t\t};\n\t\t\t\tconsole.log(data);\n\t\t\t\t(0, _api.deleteWareFile)(data).then(function (res) {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.data.code === '0001') {\n\t\t\t\t\t\t_this4.$message.success(res.data.message);\n\t\t\t\t\t\t_this4.getWareFileList();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this4.$message.error(res.data.message);\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t_this4.catchError(error.response);\n\t\t\t\t});\n\t\t\t}).catch(function (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\t_this4.$message('已取消操作');\n\t\t\t});\n\t\t},\n\t\tbatchRemove: function batchRemove() {\n\t\t\tvar _this5 = this;\n\n\t\t\tthis.$confirm('确认删除选中的图片吗？', '提示', { type: 'warning' }).then(function () {\n\t\t\t\tvar fileIds = _this5.sels.map(function (sel) {\n\t\t\t\t\treturn sel.fileId;\n\t\t\t\t});\n\t\t\t\tvar _fileIdList = [];\n\t\t\t\tfileIds.forEach(function (value, key) {\n\t\t\t\t\t_fileIdList.push({ fileId: value });\n\t\t\t\t});\n\t\t\t\tvar data = {\n\t\t\t\t\tfileIdList: _fileIdList\n\t\t\t\t};\n\t\t\t\t(0, _api.deleteWareFile)(data).then(function (res) {\n\t\t\t\t\tif (res.data.code === '0001') {\n\t\t\t\t\t\t_this5.$message.success(res.data.message);\n\t\t\t\t\t\t_this5.getWareFileList();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this5.$message.error(res.data.message);\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t_this5.catchError(error.response);\n\t\t\t\t});\n\t\t\t}).catch(function (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\t_this5.$message('已取消操作');\n\t\t\t});\n\t\t},\n\t\thandleSetMainImg: function handleSetMainImg(row) {\n\t\t\tvar _this6 = this;\n\n\t\t\tif (row.status === 0) {\n\t\t\t\tthis.$notify({\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tmessage: '请把该图片设为显示状态'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\twareId: this.wareId,\n\t\t\t\tfileId: row.fileId,\n\t\t\t\tisMainPic: 1\n\t\t\t};\n\t\t\t(0, _api.updateWareFileIsMainPic)(data).then(function (res) {\n\t\t\t\tif (res.data.code === '0001') {\n\t\t\t\t\t_this6.$message.success(res.data.message);\n\t\t\t\t\t_this6.getWareFileList();\n\t\t\t\t} else {\n\t\t\t\t\t_this6.$message.error(res.data.message);\n\t\t\t\t}\n\t\t\t}).catch(function (error) {\n\t\t\t\t_this6.catchError(error.response);\n\t\t\t});\n\t\t},\n\t\thandleNext: function handleNext() {\n\t\t\tthis.$router.push('charge?wareId=' + this.wareId);\n\t\t}\n\t},\n\tcomputed: {\n\t\tmediaLength: function mediaLength() {\n\t\t\treturn this.maxLength - this.mediaList.length - this.fileList.length;\n\t\t}\n\t},\n\tmounted: function mounted() {\n\t\tthis.$store.dispatch('setStepActive', 2);\n\t\tthis.wareId = parseInt(this.$route.query.wareId);\n\t\tthis.wareId && this.getWareFileList();\n\t}\n};\n\n/***/ }),\n\n/***/ 981:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_c('el-row', {\n    staticClass: \"toolbar\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.uploadVisible = true\n      }\n    }\n  }, [_vm._v(\"本地上传\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"danger\",\n      \"disabled\": this.sels.length === 0\n    },\n    on: {\n      \"click\": _vm.batchRemove\n    }\n  }, [_vm._v(\"批量删除\")])], 1), _vm._v(\" \"), _c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"border\": \"\",\n      \"data\": _vm.mediaList,\n      \"highlight-current-row\": \"\"\n    },\n    on: {\n      \"selection-change\": _vm.selsChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"selection\",\n      \"width\": \"55\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"type\": \"index\",\n      \"width\": \"60\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"图片缩略图\",\n      \"width\": \"140\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('img', {\n          staticClass: \"cell-img\",\n          attrs: {\n            \"src\": scope.row.filePath,\n            \"height\": \"60px\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.viewImage(scope.row.filePath)\n            }\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"更新者\",\n      \"prop\": \"createName\",\n      \"width\": \"180\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"更新时间\",\n      \"prop\": \"createTime\",\n      \"formatter\": _vm.formatCreateTime,\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"是否显示\",\n      \"width\": \"120\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-switch', {\n          attrs: {\n            \"on-color\": \"#13ce66\",\n            \"off-color\": \"#ff4949\",\n            \"on-text\": \"是\",\n            \"off-text\": \"否\",\n            \"on-value\": 1,\n            \"off-value\": 0,\n            \"disabled\": scope.row.isMainPic === 1\n          },\n          on: {\n            \"change\": function($event) {\n              _vm.handleStatus(scope.row)\n            }\n          },\n          model: {\n            value: (scope.row.status),\n            callback: function($$v) {\n              scope.row.status = $$v\n            },\n            expression: \"scope.row.status\"\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"操作\",\n      \"width\": \"180\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [(scope.row.isMainPic === 0) ? _c('div', [_c('el-button', {\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.handleSetMainImg(scope.row)\n            }\n          }\n        }, [_vm._v(\"设为主图\")]), _vm._v(\" \"), _c('el-button', {\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"danger\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.handleSingleDelete(scope.row)\n            }\n          }\n        }, [_vm._v(\"删除\")])], 1) : _c('div', [_c('el-button', {\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"success\"\n          },\n          on: {\n            \"click\": function($event) {\n              return false\n            }\n          }\n        }, [_vm._v(\"当前主图\")])], 1)]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('el-row', {\n    staticClass: \"text-center m-t\"\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"large\",\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleNext\n    }\n  }, [_vm._v(\"下一步\")])], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"本地上传\",\n      \"visible\": _vm.uploadVisible,\n      \"size\": \"small\"\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.uploadVisible = $event\n      }\n    }\n  }, [_c('el-row', [_c('el-col', {\n    class: {\n      'text-danger': _vm.mediaLength === 0\n    },\n    attrs: {\n      \"span\": 20\n    }\n  }, [_vm._v(\"\\n\\t\\t\\t\\t\\t建议上传大小为1024*512图片，单张不超过2M，最多上传\" + _vm._s(_vm.maxLength) + \"张，还可以上传\" + _vm._s(_vm.mediaLength) + \"张。\\n\\t\\t\\t\\t\")])], 1), _vm._v(\" \"), _c('el-row', {\n    staticClass: \"m-t\"\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 20\n    }\n  }, [_c('el-upload', {\n    ref: \"uploadMedia\",\n    staticClass: \"multiple-uploader\",\n    attrs: {\n      \"name\": \"fileName\",\n      \"data\": _vm.uploadData,\n      \"action\": \"/b2b/file/upload\",\n      \"list-type\": \"picture-card\",\n      \"accept\": \"image/jpeg, image/png\",\n      \"on-preview\": _vm.handleImgPreview,\n      \"on-remove\": _vm.handleRemove,\n      \"before-upload\": _vm.beforeUpload,\n      \"on-success\": _vm.handleSuccess,\n      \"on-error\": _vm.handleError,\n      \"multiple\": true,\n      \"disabled\": _vm.mediaLength === 0\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-plus\"\n  })])], 1)], 1), _vm._v(\" \"), _c('div', {\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.uploadVisible = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.onSubmit\n    }\n  }, [_vm._v(\"确 定\")])], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.previewVisible),\n      callback: function($$v) {\n        _vm.previewVisible = $$v\n      },\n      expression: \"previewVisible\"\n    }\n  }, [_c('img', {\n    attrs: {\n      \"width\": \"100%\",\n      \"src\": _vm.previewImgUrl\n    }\n  })])], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/51.139d65e6cab4643d6e10.js","var Component = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./multimedia.vue\"),\n  /* template */\n  require(\"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a95963d\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./multimedia.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/provider/ware/wareInput/multimedia.vue\n// module id = 765\n// module chunks = 51","<template>\r\n\t<section>\r\n\t  <!--  工具栏  -->\r\n\t\t<el-row class=\"toolbar\">\r\n\t\t\t<el-button type=\"primary\" @click=\"uploadVisible = true\">本地上传</el-button>\r\n\t\t\t<el-button type=\"danger\"  @click=\"batchRemove\" :disabled=\"this.sels.length===0\">批量删除</el-button>\r\n\t\t</el-row>\r\n\t\t<!-- 图片列表 -->\r\n\t\t<el-table \r\n\t\t\tborder\r\n\t\t\t:data=\"mediaList\"\r\n\t\t\tv-loading=\"loading\"\r\n\t\t\thighlight-current-row\r\n\t\t\tstyle=\"width: 100%\" \r\n\t\t\t@selection-change=\"selsChange\"> \r\n\t    <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n\t    <el-table-column type=\"index\" width=\"60\"></el-table-column>\r\n\t    <el-table-column label=\"图片缩略图\" width=\"140\">\r\n\t    \t<template scope=\"scope\">\r\n\t\t    \t<img :src=\"scope.row.filePath\" height=\"60px\" class=\"cell-img\" @click=\"viewImage(scope.row.filePath)\">\r\n\t    \t</template>\r\n\t    </el-table-column>\r\n\t    <el-table-column label=\"更新者\" prop=\"createName\" width=\"180\"></el-table-column>\r\n\t    <el-table-column label=\"更新时间\" prop=\"createTime\" :formatter=\"formatCreateTime\" sortable></el-table-column>\r\n\t    <!-- <el-table-column label=\"是否为主图\" prop=\"isMainPic\" width=\"120\" :formatter=\"formatIsMainPic\"></el-table-column> -->\r\n\t    <el-table-column label=\"是否显示\" width=\"120\">\r\n\t    \t<template scope=\"scope\">\r\n\t    \t\t<el-switch\r\n\t\t\t\t\t  v-model=\"scope.row.status\"\r\n\t\t\t\t\t  on-color=\"#13ce66\"\r\n\t\t\t\t\t  off-color=\"#ff4949\"\r\n\t\t\t\t\t  on-text=\"是\"\r\n\t\t\t\t\t  off-text=\"否\"\r\n\t\t\t\t\t  :on-value=\"1\"\r\n\t\t\t\t\t  :off-value=\"0\"\r\n\t\t\t\t\t  :disabled=\"scope.row.isMainPic === 1\"\r\n\t\t\t\t\t  @change=\"handleStatus(scope.row)\">\r\n\t\t\t\t\t</el-switch>\r\n\t    \t</template>\r\n\t    </el-table-column>\r\n\t\t  <el-table-column label=\"操作\" width=\"180\">\r\n\t        <template scope=\"scope\">\r\n\t        \t<div v-if=\"scope.row.isMainPic === 0\">\r\n\t        \t\t<el-button size=\"small\" type=\"primary\" @click=\"handleSetMainImg(scope.row)\">设为主图</el-button>\r\n\t        \t\t<el-button size=\"small\" type=\"danger\" @click=\"handleSingleDelete(scope.row)\">删除</el-button>\r\n\t        \t</div>\r\n\t        \t<div v-else>\r\n\t\t        \t<el-button size=\"small\" type=\"success\" @click=\"return false\">当前主图</el-button>\r\n\t\t        </div>\r\n\t        </template>\r\n    \t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<el-row class=\"text-center m-t\">\r\n\t\t\t<el-button size=\"large\" type=\"primary\" @click=\"handleNext\">下一步</el-button>\r\n\t\t</el-row>\r\n\t\t<!-- 本地上传 -->\r\n\t\t<el-dialog title=\"本地上传\" :visible.sync=\"uploadVisible\" size=\"small\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"20\" :class=\"{ 'text-danger' : mediaLength === 0 }\">\r\n\t\t\t\t\t建议上传大小为1024*512图片，单张不超过2M，最多上传{{maxLength}}张，还可以上传{{mediaLength}}张。\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t<el-row class=\"m-t\">\r\n\t\t\t\t<el-col :span=\"20\">\t\r\n\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\tname=\"fileName\"\r\n\t\t\t\t\t\t:data=\"uploadData\"\r\n\t\t\t\t\t\tref=\"uploadMedia\"\r\n\t\t\t\t\t\tclass=\"multiple-uploader\"\r\n\t\t\t  \t\taction=\"/b2b/file/upload\"\r\n\t\t\t  \t\tlist-type=\"picture-card\"\r\n\t\t\t  \t\taccept=\"image/jpeg, image/png\"\r\n\t\t\t  \t\t:on-preview=\"handleImgPreview\"\r\n\t\t\t  \t\t:on-remove=\"handleRemove\"\r\n\t\t\t  \t\t:before-upload=\"beforeUpload\"\r\n\t\t\t  \t\t:on-success=\"handleSuccess\"\r\n\t\t\t  \t\t:on-error=\"handleError\"\r\n\t\t\t  \t\t:multiple=\"true\"\r\n\t\t\t  \t\t:disabled=\"mediaLength === 0\">\r\n\t\t\t  \t\t<i class=\"el-icon-plus\"></i>\r\n\t\t\t\t\t</el-upload>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t  \t<div slot=\"footer\">\r\n\t\t\t    <el-button @click=\"uploadVisible = false\">取 消</el-button>\r\n\t\t\t    <el-button type=\"primary\" @click=\"onSubmit\">确 定</el-button>\r\n\t  \t\t</div>  \t\t\r\n\t\t</el-dialog>\r\n\t\t<!-- 图片预览 -->\r\n\t\t<el-dialog v-model=\"previewVisible\" size=\"tiny\">\r\n\t\t\t<img width=\"100%\" :src=\"previewImgUrl\">\r\n\t\t</el-dialog>\r\n\t</section>\r\n</template>\r\n<script>\r\n\timport { readWareFileList, createWareFile, updatetWareFileState, updateWareFileIsMainPic, deleteWareFile } from '@/api'\r\n\texport default{\r\n\t\tdata () {\r\n\t\t\treturn {\r\n\t\t\t\twareId: '',\r\n\t\t\t\tmaxLength: 10,\r\n    \t\tpreviewImgUrl: '',\r\n\t\t\t\tuploadVisible: false,\r\n    \t\tpreviewVisible: false,\r\n    \t\tfileList: [],\r\n\t\t\t\tmediaList: [{\r\n\t\t\t\t\tfileId: 100001,\r\n\t\t\t\t\tisMainPic: 1,\r\n\t\t\t\t\tstatus: 1,\r\n\t\t\t\t},{\r\n\t\t\t\t\tfileId: 100002,\r\n\t\t\t\t\tisMainPic: 0,\r\n\t\t\t\t\tstatus: 0,\r\n\t\t\t\t}],\r\n    \t\tfileIdList: [],\r\n    \t\tsels: [],\r\n    \t\tuploadData: {\r\n\t        fileUrlType: 1\r\n\t      },\r\n\t      loading: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatIsMainPic (row, column) {\r\n\t\t\t\treturn row.isMainPic === 1 ? '是' : '否'\r\n\t\t\t},\r\n\t\t\tformatCreateTime (row, column) {\r\n\t\t\t\treturn this.$moment(row.createTime).format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\t},\r\n\t\t\t// 获取图片列表\r\n\t\t\tgetWareFileList () {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\twareId: this.wareId\r\n\t\t\t\t}\r\n\t\t\t\treadWareFileList(params).then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.data.code === '0001') {\r\n\t\t\t\t\t\tthis.mediaList = res.data.result.fileList;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tthis.catchError(error.response)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 上传校验\r\n      beforeUpload (file) {\r\n        const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n        if (!isJPG) {\r\n          this.$message.error('图片只能是 JPG 或 PNG格式!');\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('图片大小不能超过 2MB!');\r\n        }\r\n        return isJPG && isLt2M;\r\n\t    },\r\n    \t// 上传成功处理\r\n    \thandleSuccess (res, file) {\r\n    \t\tif (res.code === '0001') {\r\n    \t\t\tlet resFile = res.result.file;\r\n\t\t\t    file.path = resFile.filePath;\r\n\t    \t\tthis.fileList.push(resFile)\r\n    \t\t} else {\r\n    \t\t\tthis.$message.error(res.message)\r\n    \t\t}\r\n    \t},\r\n    \t// 上传失败处理\r\n    \thandleError (err, file) {\r\n    \t\tconsole.log(file)\r\n    \t\tthis.$message.error('图片上传失败，请重试')\r\n    \t},\r\n    \t// 上传图片删除\r\n\t\t\thandleRemove (file) {\r\n        if (!file) return;\r\n        let fileList = this.fileList;\r\n        let filePath = file.path || '';\r\n        fileList = fileList.filter(file => file.filePath !== filePath)\r\n        this.fileList = fileList\r\n  \t\t},\r\n\t\t\t// 图片预览\r\n\t\t\thandleImgPreview (file, fileList) {\r\n\t\t\t\tthis.previewImgUrl = file.url;\r\n        this.previewVisible = true;\r\n    \t},\r\n \t    // 图片列表提交\r\n\t    onSubmit () {\r\n\t    \tlet mediaForm = {\r\n\t    \t\twareId: this.wareId,\r\n\t    \t\tfileList: this.fileList\r\n\t    \t}\r\n\t    \t// console.log(mediaForm)\r\n\t    \tcreateWareFile(mediaForm).then(res => {\r\n\t    \t\tif(res.data.code === '0001') {\r\n\t    \t\t\tthis.$message.success('上传成功')\r\n\t    \t\t\tthis.getWareFileList()\r\n\t    \t\t} else {\r\n\t    \t\t\tthis.$message.error(res.data.message)\r\n\t    \t\t}\r\n\t    \t\tthis.uploadVisible = false\r\n\t    \t\tthis.fileList = []\r\n\t    \t\tthis.$refs.uploadMedia.clearFiles()\r\n\t    \t})\r\n\t    \t.catch(error => {\r\n\t    \t\tthis.catchError(error.response)\r\n\t    \t\tthis.uploadVisible = false\r\n\t    \t\tthis.fileList = []\r\n\t    \t\tthis.$refs.uploadMedia.clearFiles()\r\n\t    \t})\r\n\t    },\r\n\t    // 图片选中\r\n\t\t\tselsChange (sels) {\r\n\t\t\t\tthis.sels = sels;\r\n\t\t\t},\r\n\t\t\t// 图片查看\r\n\t\t\tviewImage (filePath) {\r\n\t\t\t\tthis.previewImgUrl = filePath;\r\n        this.previewVisible = true;\r\n\t\t\t},\r\n\t\t\t// 是否显示\r\n\t\t\thandleStatus (row) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tfileId: row.fileId\r\n\t\t\t\t}\r\n\t\t\t\tupdatetWareFileState(data).then(res => {\r\n\t\t\t\t\tif (res.data.code === '0001') {\r\n\t\t\t\t\t\tthis.$message.success(res.data.message)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trow.status = row.status === 1 ? 0 : 1\r\n\t\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\trow.status = row.status === 1 ? 0 : 1\r\n\t\t\t\t\tthis.catchError(error.response)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 单张图片删除\r\n\t\t\thandleSingleDelete (row) {\r\n\t\t\t\tlet _fileIdList = [];\r\n\t\t\t\t_fileIdList[0] = { fileId: row.fileId }\r\n\t\t\t\tthis.$confirm('确认删除该图片？', '提示', {type: 'warning'})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tfileIdList: _fileIdList\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tdeleteWareFile(data).then(res => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.data.code === '0001') {\r\n\t\t\t\t\t\t\tthis.$message.success(res.data.message)\r\n\t\t\t\t\t\t\tthis.getWareFileList()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tthis.catchError(error.response)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\tthis.$message('已取消操作')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 批量删除\r\n\t\t\tbatchRemove () { \t\t\t\t\r\n\t\t\t\tthis.$confirm('确认删除选中的图片吗？', '提示', {type: 'warning'})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tlet fileIds = this.sels.map(sel => sel.fileId);\r\n\t\t\t\t\tlet _fileIdList = [];\r\n\t\t\t\t\tfileIds.forEach((value, key) => {\r\n\t\t\t\t\t\t_fileIdList.push({ fileId: value })\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tfileIdList: _fileIdList\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdeleteWareFile(data).then(res => {\r\n\t\t\t\t\t\tif(res.data.code === '0001') {\r\n\t\t\t\t\t\t\tthis.$message.success(res.data.message)\r\n\t\t\t\t\t\t\tthis.getWareFileList()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t\tthis.catchError(error.response)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\tthis.$message('已取消操作')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 设为主图\r\n\t\t\thandleSetMainImg (row) {\r\n\t\t\t\tif (row.status === 0) {\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: '请把该图片设为显示状态'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\twareId: this.wareId,\r\n\t\t\t\t\tfileId: row.fileId,\r\n\t\t\t\t\tisMainPic: 1,\r\n\t\t\t\t}\t\r\n\t\t\t\tupdateWareFileIsMainPic(data).then(res => {\r\n\t\t\t\t\tif(res.data.code === '0001') {\r\n\t\t\t\t\t\tthis.$message.success(res.data.message)\r\n\t\t\t\t\t\tthis.getWareFileList()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tthis.catchError(error.response)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 下一步\r\n\t\t\thandleNext () {\r\n\t\t\t\tthis.$router.push(`charge?wareId=${this.wareId}`)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tmediaLength () {\r\n\t\t\t\treturn  this.maxLength - this.mediaList.length - this.fileList.length;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted () {\r\n\t\t\tthis.$store.dispatch('setStepActive', 2)\r\n\t\t\tthis.wareId = parseInt(this.$route.query.wareId);\r\n\t\t\tthis.wareId && this.getWareFileList()\r\n\t\t}\r\n\t}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// multimedia.vue?28d25398","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_c('el-row', {\n    staticClass: \"toolbar\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.uploadVisible = true\n      }\n    }\n  }, [_vm._v(\"本地上传\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"danger\",\n      \"disabled\": this.sels.length === 0\n    },\n    on: {\n      \"click\": _vm.batchRemove\n    }\n  }, [_vm._v(\"批量删除\")])], 1), _vm._v(\" \"), _c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"border\": \"\",\n      \"data\": _vm.mediaList,\n      \"highlight-current-row\": \"\"\n    },\n    on: {\n      \"selection-change\": _vm.selsChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"selection\",\n      \"width\": \"55\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"type\": \"index\",\n      \"width\": \"60\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"图片缩略图\",\n      \"width\": \"140\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('img', {\n          staticClass: \"cell-img\",\n          attrs: {\n            \"src\": scope.row.filePath,\n            \"height\": \"60px\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.viewImage(scope.row.filePath)\n            }\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"更新者\",\n      \"prop\": \"createName\",\n      \"width\": \"180\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"更新时间\",\n      \"prop\": \"createTime\",\n      \"formatter\": _vm.formatCreateTime,\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"是否显示\",\n      \"width\": \"120\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-switch', {\n          attrs: {\n            \"on-color\": \"#13ce66\",\n            \"off-color\": \"#ff4949\",\n            \"on-text\": \"是\",\n            \"off-text\": \"否\",\n            \"on-value\": 1,\n            \"off-value\": 0,\n            \"disabled\": scope.row.isMainPic === 1\n          },\n          on: {\n            \"change\": function($event) {\n              _vm.handleStatus(scope.row)\n            }\n          },\n          model: {\n            value: (scope.row.status),\n            callback: function($$v) {\n              scope.row.status = $$v\n            },\n            expression: \"scope.row.status\"\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"操作\",\n      \"width\": \"180\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [(scope.row.isMainPic === 0) ? _c('div', [_c('el-button', {\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.handleSetMainImg(scope.row)\n            }\n          }\n        }, [_vm._v(\"设为主图\")]), _vm._v(\" \"), _c('el-button', {\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"danger\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.handleSingleDelete(scope.row)\n            }\n          }\n        }, [_vm._v(\"删除\")])], 1) : _c('div', [_c('el-button', {\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"success\"\n          },\n          on: {\n            \"click\": function($event) {\n              return false\n            }\n          }\n        }, [_vm._v(\"当前主图\")])], 1)]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('el-row', {\n    staticClass: \"text-center m-t\"\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"large\",\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleNext\n    }\n  }, [_vm._v(\"下一步\")])], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"本地上传\",\n      \"visible\": _vm.uploadVisible,\n      \"size\": \"small\"\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.uploadVisible = $event\n      }\n    }\n  }, [_c('el-row', [_c('el-col', {\n    class: {\n      'text-danger': _vm.mediaLength === 0\n    },\n    attrs: {\n      \"span\": 20\n    }\n  }, [_vm._v(\"\\n\\t\\t\\t\\t\\t建议上传大小为1024*512图片，单张不超过2M，最多上传\" + _vm._s(_vm.maxLength) + \"张，还可以上传\" + _vm._s(_vm.mediaLength) + \"张。\\n\\t\\t\\t\\t\")])], 1), _vm._v(\" \"), _c('el-row', {\n    staticClass: \"m-t\"\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 20\n    }\n  }, [_c('el-upload', {\n    ref: \"uploadMedia\",\n    staticClass: \"multiple-uploader\",\n    attrs: {\n      \"name\": \"fileName\",\n      \"data\": _vm.uploadData,\n      \"action\": \"/b2b/file/upload\",\n      \"list-type\": \"picture-card\",\n      \"accept\": \"image/jpeg, image/png\",\n      \"on-preview\": _vm.handleImgPreview,\n      \"on-remove\": _vm.handleRemove,\n      \"before-upload\": _vm.beforeUpload,\n      \"on-success\": _vm.handleSuccess,\n      \"on-error\": _vm.handleError,\n      \"multiple\": true,\n      \"disabled\": _vm.mediaLength === 0\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-plus\"\n  })])], 1)], 1), _vm._v(\" \"), _c('div', {\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.uploadVisible = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.onSubmit\n    }\n  }, [_vm._v(\"确 定\")])], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.previewVisible),\n      callback: function($$v) {\n        _vm.previewVisible = $$v\n      },\n      expression: \"previewVisible\"\n    }\n  }, [_c('img', {\n    attrs: {\n      \"width\": \"100%\",\n      \"src\": _vm.previewImgUrl\n    }\n  })])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a95963d\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/provider/ware/wareInput/multimedia.vue\n// module id = 981\n// module chunks = 51"],"sourceRoot":""}