webpackJsonp([45],{1270:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(52);t.default={data:function(){return{loading:!1,dialogFormVisible:!1,approveReason:"",orderInfo:{wareName:"",orderCode:"",statusRefund:"",remarks:"",premarks:"",reserveWare:[],amountSummary:[],traveler:[],contacts:[{name:"悦视觉",phone:"400123123",email:"yueshijue@163.com"}],cancelReason:""}}},methods:{format:function(e,t){switch(e.statusRefund){case 0:return"无退款";case 1:return"退款申请中";case 2:return"退款被驳回";case 10:return"退款成功"}},formatSex:function(e,t){switch(e.sex){case 1:return"男";case 2:return"女"}},formatCardType:function(e,t){switch(e.cardType){case 0:return"";case 1:return"身份证";case 2:return"护照";case 3:return"军官证";case 4:return"驾照";case 5:return"其他"}},approve:function(){this.dialogFormVisible=!0},approveConfirm:function(){var e=this;this.$confirm("确认驳回退款？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0,e.dialogFormVisible=!1;var t={orderId:e.$route.query.orderId,flag:!1,verifyInfo:e.approveReason};(0,r.checkRefund)(t).then(function(t){console.log(t),"0001"===t.data.code?e.$message({message:"驳回退款完成",type:"success"}):e.$message({message:t.data.message,type:"warning"}),e.loading=!1}).catch(function(t){console.log(t),e.$catchError(err),e.loading=!1})}).catch(function(){e.$message({type:"info",message:"已取消驳回退款"})})},refundConfirm:function(){var e=this;this.$confirm("确认退款？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0;var t={orderId:e.$route.query.orderId,flag:!0,verifyInfo:""};(0,r.checkRefund)(t).then(function(t){console.log(t),"0001"===t.data.code?e.$message({message:"退款完成",type:"success"}):e.$message({message:t.data.message,type:"warning"}),e.loading=!1}).catch(function(t){console.log(t),e.$catchError(err),e.loading=!1})}).catch(function(){e.$message({type:"info",message:"已取消退款"})})}},computed:{state:function(){switch(this.orderInfo.statusRefund){case 0:return"【无退款】";case 1:return"【退款申请中】";case 2:return"【退款被驳回】";case 10:return"【退款成功】"}}},created:function(){var e=this,t=this.$route.query;(0,r.getOrderDetail)(t).then(function(t){console.log(t);var a=t.data.result;"0001"===t.data.code?(a.item.forEach(function(t,a,r){2===t.wareType&&(e.orderInfo.wareName=t.wareName)}),e.orderInfo.orderCode=a.info.orderCode,e.orderInfo.statusRefund=a.info.statusRefund,e.orderInfo.remarks=a.item.remarks,e.orderInfo.premarks=a.info.premarks,a.item.forEach(function(t){var r={wareName:t.wareName,statusRefund:a.info.statusRefund,adultCount:t.adultCount,childCount:t.childCount,dateDepart:t.dateDepart,dateReturn:t.dateReturn,adultPrice:t.adultPrice,childPrice:t.childPrice,amountAll:a.pay.amountAll};e.orderInfo.reserveWare.push(r);var n={wareName:t.wareName,createTime:a.info.createTime,amountAll:a.pay.amountAll};e.orderInfo.amountSummary.push(n)}),e.orderInfo.traveler=a.custom):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.$catchError(t)})}}},1375:function(e,t,a){t=e.exports=a(741)(),t.push([e.i,".company-info[data-v-bdd9474c]{margin-top:100px;text-align:center}p[data-v-bdd9474c]{margin:3px 0}.card-box[data-v-bdd9474c]{padding:20px;font-size:14px}.refundButton[data-v-bdd9474c]{text-align:center;margin:20px 0}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/admin/order/refundApplyingDetail.vue"],names:[],mappings:"AACA,+BACC,iBAAkB,AAClB,iBAAmB,CACnB,AACD,mBACC,YAAa,CACb,AACD,2BACC,aAAa,AACb,cAAe,CACf,AACD,+BACC,kBAAmB,AACnB,aAAc,CACd",file:"refundApplyingDetail.vue",sourcesContent:["\n.company-info[data-v-bdd9474c]{\n\tmargin-top: 100px;\n\ttext-align: center;\n}\np[data-v-bdd9474c]{\t\t\n\tmargin:3px 0;\n}\n.card-box[data-v-bdd9474c]{\n\tpadding:20px;\n\tfont-size:14px;\n}\n.refundButton[data-v-bdd9474c]{\n\ttext-align: center;\n\tmargin:20px 0;\n}\n"],sourceRoot:""}])},1421:function(e,t,a){var r=a(1375);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(742)("7f73dbe0",r,!0)},1494:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h4",[e._v("订单明细")]),e._v(" "),a("el-card",[a("p",[e._v("悦视觉产品名称："),a("span",{staticStyle:{color:"#009dda"},domProps:{textContent:e._s(e.orderInfo.wareName)}})]),e._v(" "),a("p",[e._v("订单号："),a("span",{domProps:{textContent:e._s(e.orderInfo.orderCode)}}),a("span",{staticStyle:{color:"red"},domProps:{textContent:e._s(e.state)}})]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("打印订单")])],1),e._v(" "),a("h4",[e._v("备注")]),e._v(" "),a("el-card",[a("p",[e._v("预定备注:"),a("span",{domProps:{textContent:e._s(e.orderInfo.remarks)}})]),e._v(" "),a("p",[e._v("商家备注:"),a("span",{domProps:{textContent:e._s(e.orderInfo.premarks)}})])]),e._v(" "),a("h4",[e._v("预定项目")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderInfo.reserveWare,border:""}},[a("el-table-column",{attrs:{prop:"wareName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusRefund",align:"center",label:"订单状态",formatter:e.format}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"份数/人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(parseInt(t.row.adultCount?t.row.adultCount:0)+parseInt(t.row.childCount?t.row.childCount:0))+"("+e._s(t.row.adultCount)+"大/"+e._s(t.row.childCount)+"小)")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"dateDepart",align:"center",label:"出发日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dateReturn",align:"center",label:"返回日期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"卖价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("成人:"+e._s(parseInt(t.row.adultPrice?t.row.adultPrice:0).toFixed(2)))]),e._v(" "),a("p",[e._v("儿童:"+e._s(parseInt(t.row.childPrice?t.row.childPrice:0).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"amountAll",align:"center",label:"卖价总价"}})],1),e._v(" "),a("h4",[e._v("金额汇总")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderInfo.amountSummary,border:"","show-summary":""}},[a("el-table-column",{attrs:{prop:"wareName",align:"center",label:"商品名称",width:"500"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amountAll",align:"center",label:"金额"}})],1),e._v(" "),a("h4",[e._v("出行人")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderInfo.traveler,border:""}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",align:"center",label:"性别",formatter:e.formatSex}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",align:"center",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"birthday",align:"center",label:"生日"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hometown",align:"center",label:"籍贯"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",align:"center",width:"140",label:"出行人证件类型",formatter:e.formatCardType}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardNum",align:"center",label:"证件号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wechat",align:"center",label:"微信"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",align:"center",label:"email"}}),e._v(" "),a("el-table-column",{attrs:{prop:"height",align:"center",label:"身高"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",align:"center",label:"体重"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bwh",align:"center",label:"三围"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("胸围:"+e._s(t.row.chestSize))]),e._v(" "),a("p",[e._v("腰围:"+e._s(t.row.waistSize))]),e._v(" "),a("p",[e._v("臀围:"+e._s(t.row.hiplineSize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weddingDay",align:"center",label:"婚期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isPregnancy",align:"center",label:"女士是否怀孕"}})],1),e._v(" "),a("h4",[e._v("联系人")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderInfo.contacts,border:""}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"联系人姓名",width:"500"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"联系人手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",align:"center",label:"联系人邮箱"}})],1),e._v(" "),a("h4",[e._v("退款理由")]),e._v(" "),a("el-card",{staticClass:"card-box",domProps:{textContent:e._s(e.orderInfo.cancelReason?e.orderInfo.cancelReason:"无退款理由")}}),e._v(" "),a("div",{staticClass:"refundButton"},[a("el-button",{attrs:{type:"primary",loading:e.loading,size:"large"},on:{click:e.refundConfirm}},[e._v("退款申请确认")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading,size:"large"},on:{click:e.approve}},[e._v("退款驳回确认")]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"退款驳回",visible:e.dialogFormVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入退款驳回原因",rows:5},model:{value:e.approveReason,callback:function(t){e.approveReason=t},expression:"approveReason"}}),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.approveConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]}},751:function(e,t,a){a(1421);var r=a(7)(a(1270),a(1494),"data-v-bdd9474c",null);e.exports=r.exports}});
//# sourceMappingURL=45.41aa85f6b45905d616f8.js.map