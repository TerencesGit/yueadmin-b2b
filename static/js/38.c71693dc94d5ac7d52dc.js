webpackJsonp([38],{1280:function(e,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=r(339),c=function(e){return e&&e.__esModule?e:{default:e}}(t),a=r(52);i.default={data:function(){return{wareId:"",skuList:[{start:"2017-08-08",skuDate:"2017-08-08",adultPrice:999,childPrice:999,storageNum:99}],batchFormVisible:!1,singleFormVisible:!1,batchPriceForm:{price1:"",price2:"",price3:"",price4:"",price5:"",priceChild:"",priceSingle:"",skuDateRange:[]},singlePriceForm:{price1:"",price2:"",price3:"",price4:"",price5:"",priceChild:"",priceSingle:""},rules:{skuDateRange:[{type:"array",required:!0,message:"请选择时间范围",trigger:"blur"}],price1:[{type:"number",required:!0,message:"请输入一级价格",trigger:"blur"}],price2:[{type:"number",required:!0,message:"请输入二级价格",trigger:"blur"}],price3:[{type:"number",required:!0,message:"请输入三级价格",trigger:"blur"}],price4:[{type:"number",required:!0,message:"请输入四级价格",trigger:"blur"}],price5:[{type:"number",required:!0,message:"请输入价格",trigger:"blur"}]},pickerOptions:{shortcuts:[{text:"未来一周",onClick:function(e){var i=new Date,r=new Date;i.setTime(r.getTime()+6048e5),e.$emit("pick",[r,i])}},{text:"未来一个月",onClick:function(e){var i=new Date,r=new Date;i.setTime(r.getTime()+2592e6),e.$emit("pick",[r,i])}},{text:"未来三个月",onClick:function(e){var i=new Date,r=new Date;i.setTime(r.getTime()+7776e6),e.$emit("pick",[r,i])}}]}}},methods:{getSkuList:function(){var e=this,i={wareId:this.wareId,type:2};(0,a.readSkuInfoList)(i).then(function(i){console.log(i),"0001"===i.data.code?(e.skuList=i.data.result.skuList||[],e.skuList.forEach(function(e){e.start=e.skuDate})):e.$message.error(i.data.message)}).catch(function(i){console.log(i),e.$catchError(i)})},dateChange:function(e){this.batchPriceForm.skuDateRange=e?e.split(" - "):[]},changeMonth:function(e,i,r){},handleBatch:function(){this.batchPriceForm={skuDateRange:[],price1:"",price2:"",price3:"",price4:"",price5:"",priceChild:"",priceSingle:""},this.batchFormVisible=!0},validateForm:function(e){e=(0,c.default)({},e);for(var i in e)if(!e[i])return!1;return!0},batchSubmit:function(){var e=this,i={startDate:this.batchPriceForm.skuDateRange[0],endDate:this.batchPriceForm.skuDateRange[1],price1:this.batchPriceForm.price1,price2:this.batchPriceForm.price2,price3:this.batchPriceForm.price3,price4:this.batchPriceForm.price4,price5:this.batchPriceForm.price5,priceChild:this.batchPriceForm.priceChild,priceSingle:this.batchPriceForm.priceSingle};console.log(i),this.validateForm(i)?(i.wareId=this.wareId,console.log(i),(0,a.saveSkuPrice)(i).then(function(i){console.log(i),"0001"===i.data.code?(e.$message.success(i.data.message),e.getSkuList()):e.$message.error(i.data.message)}).catch(function(e){console.log(e)}),this.batchFormVisible=!1):this.$notify.warning({title:"提示",message:"请将表单输入完整"})},dayClick:function(e,i){i&&(console.log(i),this.singlePriceForm=(0,c.default)({},i),this.singleFormVisible=!0)},singleSubmit:function(){var e=this,i={skuId:this.singlePriceForm.skuId,skuDate:this.singlePriceForm.skuDate,price1:this.singlePriceForm.price1,price2:this.singlePriceForm.price2,price3:this.singlePriceForm.price3,price4:this.singlePriceForm.price4,price5:this.singlePriceForm.price5,priceChild:this.singlePriceForm.priceChild,priceSingle:this.singlePriceForm.priceSingle};this.validateForm(i)?(i.wareId=this.wareId,(0,a.saveSkuPrice)(i).then(function(i){console.log(i),"0001"===i.data.code?(e.$message.success(i.data.message),e.getSkuList()):e.$message.error(i.data.message)}).catch(function(e){console.log(e)}),this.singleFormVisible=!1):this.$notify.warning({title:"提示",message:"请将表单输入完整"})}},mounted:function(){this.$store.dispatch("setStepActive",4),this.wareId=parseInt(this.$route.query.wareId),this.wareId&&this.getSkuList()}}},1340:function(e,i,r){i=e.exports=r(736)(),i.push([e.i,".sku-form .el-input[data-v-1a6aa742]{width:240px}.sku-form .el-form-item[data-v-1a6aa742]{margin-bottom:5px}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/admin/ware/priceSet.vue"],names:[],mappings:"AACA,qCACE,WAAa,CACd,AACD,yCACE,iBAAmB,CACpB",file:"priceSet.vue",sourcesContent:["\n.sku-form .el-input[data-v-1a6aa742] {\n  width: 240px;\n}\n.sku-form .el-form-item[data-v-1a6aa742] {\n  margin-bottom: 5px;\n}\n"],sourceRoot:""}])},1386:function(e,i,r){var t=r(1340);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r(737)("8ccbcf44",t,!0)},1435:function(e,i){e.exports={render:function(){var e=this,i=e.$createElement,r=e._self._c||i;return r("section",[r("el-row",{staticClass:"toolbar"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleBatch}},[e._v("批量设置")]),e._v(" "),r("back-button")],1),e._v(" "),r("full-calendar",{attrs:{events:e.skuList,"first-day":"0"},on:{changeMonth:e.changeMonth,dayClick:e.dayClick,eventClick:e.dayClick}}),e._v(" "),r("el-dialog",{attrs:{visible:e.batchFormVisible,title:"批量价格设置"},on:{"update:visible":function(i){e.batchFormVisible=i}}},[r("el-form",{staticClass:"sku-form",attrs:{model:e.batchPriceForm,"label-width":"240px"}},[r("el-form-item",{attrs:{label:"起止日期：",prop:"skuDateRange"}},[r("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.batchPriceForm.skuDateRange,callback:function(i){e.batchPriceForm.skuDateRange=i},expression:"batchPriceForm.skuDateRange"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价1：",prop:"price1"}},[r("el-input",{attrs:{placeholder:"输入成人价1"},model:{value:e.batchPriceForm.price1,callback:function(i){e.batchPriceForm.price1=e._n(i)},expression:"batchPriceForm.price1"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价2：",prop:"price2"}},[r("el-input",{attrs:{placeholder:"输入成人价2"},model:{value:e.batchPriceForm.price2,callback:function(i){e.batchPriceForm.price2=e._n(i)},expression:"batchPriceForm.price2"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价3：",prop:"price3"}},[r("el-input",{attrs:{placeholder:"输入成人价3"},model:{value:e.batchPriceForm.price3,callback:function(i){e.batchPriceForm.price3=e._n(i)},expression:"batchPriceForm.price3"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价4：",prop:"price4"}},[r("el-input",{attrs:{placeholder:"输入成人价4"},model:{value:e.batchPriceForm.price4,callback:function(i){e.batchPriceForm.price4=e._n(i)},expression:"batchPriceForm.price4"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价5：",prop:"price5"}},[r("el-input",{attrs:{placeholder:"输入成人价5"},model:{value:e.batchPriceForm.price5,callback:function(i){e.batchPriceForm.price5=e._n(i)},expression:"batchPriceForm.price5"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"儿童价：",prop:"priceChild"}},[r("el-input",{attrs:{placeholder:"输入儿童价"},model:{value:e.batchPriceForm.priceChild,callback:function(i){e.batchPriceForm.priceChild=e._n(i)},expression:"batchPriceForm.priceChild"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单人差：",prop:"priceSingle"}},[r("el-input",{attrs:{placeholder:"输入单人差"},model:{value:e.batchPriceForm.priceSingle,callback:function(i){e.batchPriceForm.priceSingle=e._n(i)},expression:"batchPriceForm.priceSingle"}})],1)],1),e._v(" "),r("div",{slot:"footer"},[r("el-button",{on:{click:function(i){e.batchFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.batchSubmit}},[e._v("确定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.singleFormVisible,title:"设置价格"},on:{"update:visible":function(i){e.singleFormVisible=i}}},[r("el-form",{staticClass:"sku-form",attrs:{model:e.singlePriceForm,"label-width":"240px"}},[r("el-form-item",{attrs:{label:"当前日期："}},[r("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.singlePriceForm.skuDate))])]),e._v(" "),r("el-form-item",{attrs:{label:"成人价1：",prop:"price1"}},[r("el-input",{attrs:{placeholder:"输入成人价1"},model:{value:e.singlePriceForm.price1,callback:function(i){e.singlePriceForm.price1=e._n(i)},expression:"singlePriceForm.price1"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价2：",prop:"price2"}},[r("el-input",{attrs:{placeholder:"输入成人价2"},model:{value:e.singlePriceForm.price2,callback:function(i){e.singlePriceForm.price2=e._n(i)},expression:"singlePriceForm.price2"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价3：",prop:"price3"}},[r("el-input",{attrs:{placeholder:"输入成人价3"},model:{value:e.singlePriceForm.price3,callback:function(i){e.singlePriceForm.price3=e._n(i)},expression:"singlePriceForm.price3"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价4：",prop:"price4"}},[r("el-input",{attrs:{placeholder:"输入成人价4"},model:{value:e.singlePriceForm.price4,callback:function(i){e.singlePriceForm.price4=e._n(i)},expression:"singlePriceForm.price4"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成人价5：",prop:"price5"}},[r("el-input",{attrs:{placeholder:"输入成人价5"},model:{value:e.singlePriceForm.price5,callback:function(i){e.singlePriceForm.price5=e._n(i)},expression:"singlePriceForm.price5"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"儿童价：",prop:"priceChild"}},[r("el-input",{attrs:{placeholder:"输入儿童价"},model:{value:e.singlePriceForm.priceChild,callback:function(i){e.singlePriceForm.priceChild=e._n(i)},expression:"singlePriceForm.priceChild"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单人差：",prop:"priceSingle"}},[r("el-input",{attrs:{placeholder:"输入单人差"},model:{value:e.singlePriceForm.priceSingle,callback:function(i){e.singlePriceForm.priceSingle=e._n(i)},expression:"singlePriceForm.priceSingle"}})],1)],1),e._v(" "),r("div",{slot:"footer"},[r("el-button",{on:{click:function(i){e.singleFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.singleSubmit}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]}},761:function(e,i,r){r(1386);var t=r(7)(r(1280),r(1435),"data-v-1a6aa742",null);e.exports=t.exports}});
//# sourceMappingURL=38.c71693dc94d5ac7d52dc.js.map