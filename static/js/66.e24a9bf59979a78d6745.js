webpackJsonp([66],{722:function(e,t,a){var s=a(10)(a(806),a(969),null,null);e.exports=s.exports},806:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(70);t.default={data:function(){return{filter:{name:"",code:""},currPage:1,pageSize:10,total:0,wareList:[{wareId:10001,wareName:"三亚旅拍1",status:1},{wareId:10002,wareName:"三亚旅拍2",status:0},{wareId:10003,wareName:"三亚旅拍3",status:-1,cause:"暂无原因"}],cause:"",causeVisible:!1,dialogVisible:!1,wareId:"",shelfForm:{cause:""},rules:{cause:[{required:!0,message:"请输入下架原因",trigger:"blur"}]}}},methods:{formatStatus:function(e,t){return 0===e.status?"已下架":1===e.status?"已上架":"平台下架"},handleSizeChange:function(e){this.pageSize=e,this.getWareList()},handleCurrentChange:function(e){this.currPage=e,this.getWareList()},getWareList:function(){var e=this;this.loading=!0;var t={currPage:this.currPage,pageSize:this.pageSize,wareName:this.filter.name,wareCode:this.filter.code,verifyStatus:2};console.log(t),(0,s.readWareList)(t).then(function(t){console.log(t),e.loading=!1,"0001"===t.data.code?(e.total=t.data.result.pageInfo.count,e.wareList=t.data.result.wareList):e.$message.error(t.data.message)}).catch(function(t){e.loading=!1,console.log(t),e.catchError(t.response)})},handleShelf:function(e){var t=this;if(this.wareId=e.wareId,this.shelfForm.cause="",0!==e.status)return 1===e.status?void(this.dialogVisible=!0):void this.$confirm("确定上架该产品？","提示",{type:"warning"}).then(function(){var a={wareId:e.wareId,upDownStatus:1};(0,s.updateWareUpDownStatus)(a).then(function(e){console.log(e),"0001"===e.data.code?(t.$message.success("操作成功"),t.getWareList()):t.$message.error(e.data.message)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e),t.$message.info("已取消操作")})},submitForm:function(){var e=this;this.$refs.shelfForm.validate(function(t){if(t){var a={wareId:e.wareId,cause:e.shelfForm.cause,upDownStatus:0};console.log(a),(0,s.updateWareUpDownStatus)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success("操作成功"),e.getWareList()):e.$message.error(t.data.message)}).catch(function(e){console.log(e)}),e.dialogVisible=!1}else console.log("err submit")})},showCause:function(e){this.cause=e.cause,this.causeVisible=!0},handleShowDetail:function(e){this.$router.push({path:"/admin/ware/detail?wareId="+e})}},mounted:function(){this.getWareList()}}},969:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"toolbar"},[a("el-form",{attrs:{inline:!0,model:e.filter}},[a("el-form-item",{attrs:{label:"商品编号"}},[a("el-input",{attrs:{placeholder:"商品编号"},model:{value:e.filter.name,callback:function(t){e.filter.name=t},expression:"filter.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.filter.name,callback:function(t){e.filter.name=t},expression:"filter.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getWareList}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.wareList,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"wareId",label:"商品编号",srotable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareName",label:"商品名称",srotable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"providerName",label:"供应商",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"srcCityName",label:"出发城市",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"联系人",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upDownTime",label:"上/下架时间",sortable:"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",formatter:e.formatStatus,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.status?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showCause(t.row)}}},[e._v("查看原因")]):e._e(),e._v(" "),-1===t.row.status?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleShelf(t.row)}}},[e._v("上架")]):e._e(),e._v(" "),0===t.row.status?a("el-button",{attrs:{size:"small",disabled:""},on:{click:function(e){return!1}}},[e._v("上架")]):e._e(),e._v(" "),1===t.row.status?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleShelf(t.row)}}},[e._v("下架")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleShowDetail(t.row.wareId)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-row",{staticClass:"toolbar"},[a("el-pagination",{attrs:{"current-page":e.currPage,"page-size":e.pageSize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"商品下架",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"shelfForm",staticStyle:{padding:"0 30px"},attrs:{model:e.shelfForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"",prop:"cause"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入下架原因"},model:{value:e.shelfForm.cause,callback:function(t){e.shelfForm.cause=t},expression:"shelfForm.cause"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.submitForm(t)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"下架原因",visible:e.causeVisible},on:{"update:visible":function(t){e.causeVisible=t}}},[a("div",{staticClass:"dialog-content"},[e._v("\n    \t\t"+e._s(e.cause)+"\n    \t")]),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.causeVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=66.e24a9bf59979a78d6745.js.map