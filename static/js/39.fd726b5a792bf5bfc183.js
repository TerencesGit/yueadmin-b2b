webpackJsonp([39],{713:function(e,t,n){n(931);var i=n(10)(n(797),n(996),"data-v-7a16a297",null);e.exports=i.exports},797:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(329),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(70);t.default={data:function(){return{kindList:[{kindId:10001,kindName:"一级 1",templetId:10001,children:[{kindId:20001,kindName:"二级 1-1",templetId:10002,children:[{kindId:30001,kindName:"三级 1-1-1",templetId:10003}]}]}],templateList:[{templateId:10001,templateName:"模板1",htmlName:"模板页面1",createTime:new Date,status:1,attributeList:[]},{templateId:10002,templateName:"模板2",htmlName:"模板页面1",createTime:new Date,status:1,attributeList:[]},{templateId:10003,templateName:"模板3",htmlName:"模板页面1",createTime:new Date,status:1,attributeList:[]},{templateId:10004,templateName:"模板4",htmlName:"模板页面1",createTime:new Date,status:1,attributeList:[]}],defaultProps:{children:"children",label:"kindName"},kindFormVisible:!1,kindFormTitle:"新增品类",kindForm:{kindId:0,parentId:0,kindName:"",kindCode:"",kindDesc:"",sortId:1,templetId:"",note:""},rules:{kindName:[{required:!0,message:"请输入品类名称",trigger:"blur"}],kindCode:[{required:!0,message:"请输入品类编号",trigger:"blur"}],kindDesc:[{required:!0,message:"请输入品类描述",trigger:"blur"}],sortId:[{type:"number",required:!0,message:"请输入同级序号",trigger:"blur"}],templateId:[{required:!0,message:"请选择品类模板",trigger:"blur"}],note:[{required:!0,message:"请输入备注信息",trigger:"blur"}]},loading:!1,templateVisible:!1,templateId:"",selectedKindId:""}},methods:{getWareKindList:function(){var e=this;this.loading=!0;var t={};(0,o.readWareKind)(t).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.kindList=t.data.result.wareKindList):e.$message.error(t.data.message),e.loading=!1}).catch(function(t){e.loading=!1,console.log(t),e.catchError(t.response)})},getTemplateList:function(){var e=this,t={};(0,o.readTemplateList)(t).then(function(t){console.log(t),"0001"===t.data.code?e.templateList=t.data.result.templateList:e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.catchError(t.response)})},nodeClick:function(e){console.log(e)},handleAdd:function(){this.kindFormTitle="品类创建",this.kindForm.parentId=0,this.kindForm.kindId=0,this.kindFormVisible=!0},handleEdit:function(e,t){this.kindFormTitle="品类编辑",this.kindForm={kindId:t.kindId,kindName:t.kindName,kindCode:t.kindCode,kindDesc:t.kindDesc,sortId:t.sortId,templetId:t.templetId,note:t.note},console.log(this.kindForm),this.kindFormVisible=!0},handleAppend:function(e,t){this.kindFormTitle="新增下级品类",this.kindForm={parentId:t.kindId,kindId:0,kindName:"",kindCode:"",kindDesc:"",sortId:1,templetId:"",note:""},this.kindFormVisible=!0},onSubmit:function(){var e=this,t=(0,a.default)({},this.kindForm);console.log(t),this.$refs.kindForm.validate(function(n){n?((0,o.saveWareKind)(t).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getWareKindList()):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.catchError(t.response)}),e.kindFormVisible=!1):console.log("err submit")})},templateSet:function(e,t){console.log(e,t),this.selectedKindId=t.kindId,this.templateVisible=!0},bindTemplate:function(){if(this.templateId){var e={kindId:this.selectedKindId,templateId:this.templateId};console.log(e)}else this.$notify({title:"提示",type:"warning",message:"请选择属性模板"})},handleRemove:function(e,t){var n=this;if(console.log(t),0!==t.children.length)return void this.$notify({type:"warning",title:"提示",message:"有下级品类，不可删除"});var i=t.kindId;this.$confirm("确定删除该品类","提示",{type:"warning"}).then(function(){var e={wareKindId:i};(0,o.deleteWareKind)(e).then(function(e){console.log(e),"0001"===e.data.code?(n.$message.success(e.data.message),n.getWareKindList()):n.$message.error(e.data.message)}).catch(function(e){console.log(e),n.catchError(e.response)})}).catch(function(e){console.log(e),n.$message("已取消操作")})},renderContent:function(e,t){var n=this,i=t.node,a=t.data,o=t.store;return e("span",null,[e("span",null,[e("span",null,[i.label])]),e("span",{style:"float: right; margin-right: 20px"},[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(){return n.handleAppend(o,a)}}},["添加下级"]),e("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(){return n.handleEdit(o,a)}}},["编辑"]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(){return n.handleRemove(o,a)}}},["删除"])])])}},mounted:function(){this.getWareKindList(),this.getTemplateList()}}},886:function(e,t,n){t=e.exports=n(696)(),t.push([e.i,".radio.no-input .el-radio__input[data-v-7a16a297]{display:none}.kind-detail[data-v-7a16a297]{min-height:200px;padding:15px;background:#fff}.kind-detail p[data-v-7a16a297]{margin:10px 0}.el-radio span[data-v-7a16a297]{display:none}.radio .fa[data-v-7a16a297]{font-size:20px;color:#ddd}.radio .fa-check-square[data-v-7a16a297]{color:#20a0ff}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/admin/system/categoryManage.vue"],names:[],mappings:"AACA,kDACE,YAAc,CACf,AACD,8BACE,iBAAkB,AAClB,aAAc,AACd,eAAiB,CAClB,AACD,gCACI,aAAe,CAClB,AACD,gCACE,YAAc,CACf,AACD,4BACE,eAAgB,AAChB,UAAY,CACb,AACD,yCACE,aAAe,CAChB",file:"categoryManage.vue",sourcesContent:["\n.radio.no-input .el-radio__input[data-v-7a16a297] {\n  display: none;\n}\n.kind-detail[data-v-7a16a297] {\n  min-height: 200px;\n  padding: 15px;\n  background: #fff;\n}\n.kind-detail p[data-v-7a16a297] {\n    margin: 10px 0;\n}\n.el-radio span[data-v-7a16a297] {\n  display: none;\n}\n.radio .fa[data-v-7a16a297] {\n  font-size: 20px;\n  color: #ddd;\n}\n.radio .fa-check-square[data-v-7a16a297] {\n  color: #20a0ff;\n}\n"],sourceRoot:""}])},931:function(e,t,n){var i=n(886);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(697)("26416626",i,!0)},996:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-row",{staticClass:"toolbar"},[0===e.kindList.length?n("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("创建品类")]):e._e()],1),e._v(" "),n("el-row",[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{data:e.kindList,props:e.defaultProps,"node-key":"id","highlight-current":"","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.nodeClick}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.kindFormTitle,visible:e.kindFormVisible},on:{"update:visible":function(t){e.kindFormVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:16,offset:4}},[n("el-form",{ref:"kindForm",attrs:{model:e.kindForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"品类名称",prop:"kindName"}},[n("el-input",{attrs:{placeholder:"输入品牌名称"},model:{value:e.kindForm.kindName,callback:function(t){e.kindForm.kindName=t},expression:"kindForm.kindName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"品类编号",prop:"kindCode"}},[n("el-input",{attrs:{placeholder:"旅游以T开头，拍摄以P开头"},model:{value:e.kindForm.kindCode,callback:function(t){e.kindForm.kindCode=t},expression:"kindForm.kindCode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"品类描述",prop:"kindDesc"}},[n("el-input",{attrs:{type:"textarea",placeholder:"品类描述"},model:{value:e.kindForm.kindDesc,callback:function(t){e.kindForm.kindDesc=t},expression:"kindForm.kindDesc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"同级序号",prop:"sortId"}},[n("el-input",{attrs:{placeholder:"同级序号"},model:{value:e.kindForm.sortId,callback:function(t){e.kindForm.sortId=e._n(t)},expression:"kindForm.sortId"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"品类模板"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"品类模板"},model:{value:e.kindForm.templetId,callback:function(t){e.kindForm.templetId=t},expression:"kindForm.templetId"}},e._l(e.templateList,function(e){return n("el-option",{key:e.templateId,attrs:{label:e.templateName,value:e.templateId}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"note"}},[n("el-input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.kindForm.note,callback:function(t){e.kindForm.note=t},expression:"kindForm.note"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{nativeOn:{click:function(t){e.kindFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.onSubmit(t)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=39.fd726b5a792bf5bfc183.js.map