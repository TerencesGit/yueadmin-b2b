webpackJsonp([7],{1045:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-row",{staticClass:"toolbar"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增附加服务")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.backList}},[e._v("返回商品列表")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.serviceList,"highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index"}}),e._v(" "),r("el-table-column",{attrs:{prop:"wareCode",label:"服务ID",width:"180px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"wareName",label:"服务名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"wareDesc",label:"服务描述"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180px",formatter:e.formatUpdateTime}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleSkuSet(t.row.wareId)}}},[e._v("价格设置 ")])]}}])})],1),e._v(" "),r("el-row",{staticClass:"toolbar text-center"},[r("el-button",{staticClass:"m-t",attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("下一步")])],1),e._v(" "),r("el-dialog",{attrs:{visible:e.serviceFormVisible,title:"新增附加服务"},on:{"update:visible":function(t){e.serviceFormVisible=t}}},[r("el-form",{ref:"wareForm",staticClass:"form-item-width",attrs:{model:e.wareForm,rules:e.rules,"label-width":"110px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"服务名称",prop:"wareName"}},[r("el-input",{attrs:{placeholder:"服务名称"},model:{value:e.wareForm.wareName,callback:function(t){e.wareForm.wareName=t},expression:"wareForm.wareName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"缩略名",prop:"briefName"}},[r("el-input",{attrs:{placeholder:"缩略名"},model:{value:e.wareForm.briefName,callback:function(t){e.wareForm.briefName=t},expression:"wareForm.briefName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建议售价",prop:"suggestedPrice"}},[r("el-input",{attrs:{placeholder:"建议售价"},model:{value:e.wareForm.suggestedPrice,callback:function(t){e.wareForm.suggestedPrice=e._n(t)},expression:"wareForm.suggestedPrice"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"关键字",prop:"keyWords"}},[r("el-input",{attrs:{placeholder:"关键字以英文逗号分隔"},model:{value:e.wareForm.keyWords,callback:function(t){e.wareForm.keyWords=t},expression:"wareForm.keyWords"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"服务描述：",prop:"wareDesc"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.wareForm.wareDesc,callback:function(t){e.wareForm.wareDesc=t},expression:"wareForm.wareDesc"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",slot:"footer"},[r("el-button",{on:{click:function(t){e.serviceFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},793:function(e,t,r){r(970);var a=r(10)(r(877),r(1045),"data-v-f4cdfc46",null);e.exports=a.exports},877:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(339),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=r(70);t.default={data:function(){return{wareId:"",loading:!1,serviceFormVisible:!1,serviceList:[],wareForm:{wareId:"",wareName:"",briefName:"",keyWords:"",wareDesc:"",suggestedPrice:"",parentId:""},rules:{wareName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],briefName:[{required:!0,message:"请输入服务缩略名",trigger:"blur"}],wareDesc:[{required:!0,message:"请输入服务描述",trigger:"blur"}]}}},methods:{formatUpdateTime:function(e){return e.updateTime&&this.$moment(e.updateTime).format("YYYY-MM-DD HH:mm:ss")},getServiceList:function(){var e=this,t={parentId:this.wareId};this.loading=!0,(0,i.readWareService)(t).then(function(t){e.loading=!1,"0001"===t.data.code?e.serviceList=t.data.result.wareServiceList:e.$message.error(t.data.message)}).catch(function(t){e.loading=!1,console.log(t)})},handleAdd:function(){this.wareForm={},this.serviceFormVisible=!0},handleEdit:function(e){this.wareForm=(0,o.default)({},e),this.serviceFormVisible=!0},onSubmit:function(){var e=this;this.$refs.wareForm.validate(function(t){if(!t)return e.$message.error("表单输入有误"),!1;var r={wareId:"",wareName:"",briefName:"",keyWords:"",wareDesc:"",suggestedPrice:"",parentId:"",openDate:"",closeDate:"",srcCityCode:"",dstCityCode:"",brandId:"",tripDays:"",sellPreDays:"",nocashReserveMinute:""},a=(0,o.default)(r,e.wareForm);a.parentId=e.wareId,console.log(a),(0,i.saveWareServiceInfo)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getServiceList()):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.$catchError(t)}),e.serviceFormVisible=!1})},handleShelf:function(e){console.log((0,o.default)({},e));var t={wareId:e.wareId};(0,i.updateWareUpDownStatus)(t).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},handleSkuSet:function(e){this.$router.push({path:"/provider/ware/serviceSkuSet?wareId="+e})},backList:function(){this.$router.push("/provider/ware/wareManage")},handleNext:function(){this.$router.push("activity?wareId="+this.wareId)}},mounted:function(){this.$store.dispatch("setStepActive",5);var e=parseInt(this.$route.query.wareId);e?(this.wareForm.parentId=this.wareId=e,this.getServiceList()):this.$router.push("base")}}},925:function(e,t,r){t=e.exports=r(721)(),t.push([e.i,".el-card[data-v-f4cdfc46]{margin:15px}.el-card__body[data-v-f4cdfc46]{padding:30px}.input-width .el-input[data-v-f4cdfc46]{width:240px}.input-unit[data-v-f4cdfc46]{margin-left:5px;vertical-align:top}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/provider/ware/wareInput/serviceEdit.vue"],names:[],mappings:"AACA,0BACC,WAAa,CACb,AACD,gCACC,YAAc,CACd,AACD,wCACC,WAAa,CACb,AACD,6BACC,gBAAiB,AACjB,kBAAoB,CACpB",file:"serviceEdit.vue",sourcesContent:["\n.el-card[data-v-f4cdfc46] {\n\tmargin: 15px;\n}\n.el-card__body[data-v-f4cdfc46] {\n\tpadding: 30px;\n}\n.input-width .el-input[data-v-f4cdfc46] {\n\twidth: 240px;\n}\n.input-unit[data-v-f4cdfc46] {\n\tmargin-left: 5px;\n\tvertical-align: top;\n}\n"],sourceRoot:""}])},970:function(e,t,r){var a=r(925);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(722)("4fc08fb8",a,!0)}});
//# sourceMappingURL=7.7be9831026124a3a3526.js.map