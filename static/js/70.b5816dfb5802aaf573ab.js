webpackJsonp([70],{1049:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("el-row",{staticClass:"toolbar"},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:""}},[r("el-input",{attrs:{placeholder:"根据属性名称搜索"},model:{value:t.filter.attributeName,callback:function(e){t.filter.attributeName=e},expression:"filter.attributeName"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.getAttributeList}},[t._v("搜索")])],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增属性")])],1)],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"","highlight-current-row":"",data:t.attributeList}},[r("el-table-column",{attrs:{type:"index",width:"60"}}),t._v(" "),r("el-table-column",{attrs:{prop:"attributeName",label:"属性名称"}}),t._v(" "),r("el-table-column",{attrs:{prop:"attributeType",label:"属性类型",formatter:t.formatAttrType}}),t._v(" "),r("el-table-column",{attrs:{prop:"description",label:"属性描述"}}),t._v(" "),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:t.formatCreateTime,width:"180"}}),t._v(" "),r("el-table-column",{attrs:{prop:"createBy",label:"创建人"}}),t._v(" "),r("el-table-column",{attrs:{prop:"note",label:"备注"}}),t._v(" "),r("el-table-column",{attrs:{prop:"status",label:"属性状态",formatter:t.formatStatus}}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(r){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(r){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),r("el-row",{staticClass:"toolbar"},[r("el-pagination",{attrs:{"current-page":t.filter.currPage,"page-sizes":[10,20,30,40],"page-size":t.filter.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),r("el-dialog",{attrs:{title:t.attrFormTitle,visible:t.attrFormVisible},on:{"update:visible":function(e){t.attrFormVisible=e},close:t.handleCancel}},[r("el-row",[r("el-col",{attrs:{span:16,offset:4}},[r("el-form",{ref:"attributeForm",attrs:{model:t.attributeForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"属性名称：",prop:"attributeName"}},[r("el-input",{model:{value:t.attributeForm.attributeName,callback:function(e){t.attributeForm.attributeName=e},expression:"attributeForm.attributeName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"属性类型：",prop:"attributeType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择属性类型"},model:{value:t.attributeForm.attributeType,callback:function(e){t.attributeForm.attributeType=e},expression:"attributeForm.attributeType"}},t._l(t.attrTypeList,function(t){return r("el-option",{key:t,attrs:{value:t.value,label:t.label}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"属性描述：",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.attributeForm.description,callback:function(e){t.attributeForm.description=e},expression:"attributeForm.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"备注：",prop:"note"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.attributeForm.note,callback:function(e){t.attributeForm.note=e},expression:"attributeForm.note"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"状态：",prop:"status"}},[r("el-radio-group",{model:{value:t.attributeForm.status,callback:function(e){t.attributeForm.status=t._n(e)},expression:"attributeForm.status"}},[r("el-radio",{attrs:{label:1}},[t._v("启用")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("禁用")])],1)],1)],1)],1)],1),t._v(" "),r("div",{slot:"footer"},[r("el-button",{on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]}},738:function(t,e,r){var a=r(10)(r(822),r(1049),null,null);t.exports=a.exports},822:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(337),i=function(t){return t&&t.__esModule?t:{default:t}}(a),l=r(70);e.default={data:function(){return{filter:{attributeName:"",currPage:1,pageSize:20},count:0,attrFormTitle:"新增属性",attrFormVisible:!1,attributeForm:{attributeId:0,attributeName:"",attributeType:"",description:"",note:"",status:1},attrTypeList:[{value:"0",label:"非关键属性"},{value:"1",label:"关键属性"},{value:"2",label:"销售属性"},{value:"3",label:"价格属性"}],rules:{attributeName:[{required:!0,message:"请填写属性名",trigger:"blur"}],attributeType:[{required:!0,message:"请选择属性类型",trigger:"change"}],description:[{required:!0,message:"请填写属性描述",trigger:"blur"}],note:[{required:!0,message:"请填写备注信息",trigger:"blur"}],status:[{required:!0,type:"number",message:"请选择状态",trigger:"change"}]},loading:!1,attributeList:[{attributeId:"00001",attributeName:"大交通",attributeType:"1",description:"123",status:1,createTime:new Date,note:"111"}]}},methods:{formatStatus:function(t){return 1===t.status?"启用":"禁用"},formatCreateTime:function(t){return this.$moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")},formatAttrType:function(t){return this.attrTypeList[t.attributeType].label},getAttributeList:function(){var t=this;this.loading=!0;var e=(0,i.default)({},this.filter);(0,l.readAttributeList)(e).then(function(e){console.log(e),"0001"===e.data.code?(t.attributeList=e.data.result.defineList,t.count=e.data.result.pageInfo.count):t.$message(e.data.message),t.loading=!1}).catch(function(e){t.catchError(e.response),t.loading=!1})},handleAdd:function(){this.attributeForm={attributeId:0,attributeName:"",attributeType:"",description:"",note:"",status:1},this.attrFormTitle="新增属性",this.attrFormVisible=!0},handleEdit:function(t){this.attrFormTitle="属性编辑",this.attributeForm=(0,i.default)({},t),this.attrFormVisible=!0},handleCancel:function(){this.$refs.attributeForm.resetFields(),this.attrFormVisible=!1},submitForm:function(){var t=this;this.$refs.attributeForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;var r=(0,i.default)({},t.attributeForm);(0,l.saveAttributeDefine)(r).then(function(e){"0001"===e.data.code?(t.$message.success(e.data.message),t.getAttributeList()):t.$message.error(e.data.message),t.attrFormVisible=!1}).catch(function(e){t.attrFormVisible=!1,t.catchError(e.response)})})},handleDelete:function(t){var e=this;this.$confirm("确认要删除该属性？","提示",{type:"warning"}).then(function(){var r={attributeId:t.attributeId};(0,l.deleteAttributeDefine)(r).then(function(t){"0001"===t.data.code?(e.$message.success(t.data.message),e.getAttributeList()):e.$message.error(t.data.message)}).catch(function(t){e.catchError(t.response)})}).catch(function(){e.$message("已取消操作")})},handleSizeChange:function(t){this.filter.pageSize=t,this.getAttributeList()},handleCurrentChange:function(t){this.filter.currPage=t,this.getAttributeList()}},created:function(){this.getAttributeList()}}}});
//# sourceMappingURL=70.b5816dfb5802aaf573ab.js.map