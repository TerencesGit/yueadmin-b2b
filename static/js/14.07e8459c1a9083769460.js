webpackJsonp([14],{760:function(e,t,r){r(922);var a=r(10)(r(844),r(976),"data-v-502c7f81",null);e.exports=a.exports},844:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(329),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r(70);t.default={data:function(){return{wareId:"",serviceFormVisible:!1,activityList:[],wareForm:{wareId:"",wareName:"",briefName:"",keyWords:"",wareDesc:"",suggestedPrice:"",parentId:""},rules:{wareName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],briefName:[{required:!0,message:"请输入活动缩略名",trigger:"blur"}],wareDesc:[{required:!0,message:"请输入活动描述",trigger:"blur"}]}}},methods:{formatUpdateTime:function(e){return e.updateTime&&this.$moment(e.updateTime).format("YYYY-MM-DD HH:mm:ss")},getActivityList:function(){var e=this,t={parentId:this.wareId};(0,s.readWareActivity)(t).then(function(t){console.log(t),"0001"===t.data.code?e.activityList=t.data.result.wareActivityList:e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},handleAdd:function(){this.wareForm={},this.serviceFormVisible=!0},handleEdit:function(e){this.wareForm=(0,o.default)({},e),this.serviceFormVisible=!0},onSubmit:function(){var e=this;this.$refs.wareForm.validate(function(t){if(!t)return e.$message.error("表单输入有误"),!1;var r={wareId:"",wareName:"",briefName:"",keyWords:"",wareDesc:"",suggestedPrice:"",parentId:"",openDate:"",closeDate:"",srcCityCode:"",dstCityCode:"",brandId:"",tripDays:"",sellPreDays:"",nocashReserveMinute:""},a=(0,o.default)(r,e.wareForm);a.parentId=e.wareId,console.log(a),(0,s.saveWareActivityInfo)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getActivityList()):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.catchError(t.response)}),e.serviceFormVisible=!1})},handleShelf:function(e){console.log((0,o.default)({},e));var t={wareId:e.wareId};(0,s.updateWareUpDownStatus)(t).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},handleSkuSet:function(e){this.$router.push({path:"/provider/ware/serviceSkuSet?wareId="+e})},save:function(){this.$router.push("/provider/ware/wareManage")},submit:function(){var e=this;this.$confirm("确定将该商品提交审核？","提示",{type:"warning"}).then(function(){(0,s.updateVerifyStatus)({wareId:e.wareId}).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.$router.push("/provider/ware/wareManage")):e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.catchError(t.response)})}).catch(function(e){console.log(e)})}},mounted:function(){this.$store.dispatch("setStepActive",6);var e=parseInt(this.$route.query.wareId);e?(this.wareForm.parentId=this.wareId=e,this.getActivityList()):this.$router.push("base")}}},877:function(e,t,r){t=e.exports=r(696)(),t.push([e.i,".el-card[data-v-502c7f81]{margin:15px}.el-card__body[data-v-502c7f81]{padding:30px}.input-width .el-input[data-v-502c7f81]{width:240px}.input-unit[data-v-502c7f81]{margin-left:5px;vertical-align:top}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/provider/ware/wareInput/activity.vue"],names:[],mappings:"AACA,0BACC,WAAa,CACb,AACD,gCACC,YAAc,CACd,AACD,wCACC,WAAa,CACb,AACD,6BACC,gBAAiB,AACjB,kBAAoB,CACpB",file:"activity.vue",sourcesContent:["\n.el-card[data-v-502c7f81] {\n\tmargin: 15px;\n}\n.el-card__body[data-v-502c7f81] {\n\tpadding: 30px;\n}\n.input-width .el-input[data-v-502c7f81] {\n\twidth: 240px;\n}\n.input-unit[data-v-502c7f81] {\n\tmargin-left: 5px;\n\tvertical-align: top;\n}\n"],sourceRoot:""}])},922:function(e,t,r){var a=r(877);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(697)("a4a14b18",a,!0)},976:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-row",{staticClass:"toolbar"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增推荐活动")])],1),e._v(" "),r("el-table",{attrs:{data:e.activityList,border:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index"}}),e._v(" "),r("el-table-column",{attrs:{prop:"wareCode",label:"活动ID",width:"180px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"wareName",label:"活动名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"wareDesc",label:"活动描述"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180px",formatter:e.formatUpdateTime}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleSkuSet(t.row.wareId)}}},[e._v("库存价格")])]}}])})],1),e._v(" "),r("el-row",{staticClass:"toolbar text-center"},[r("el-button",{staticClass:"m-t",attrs:{type:"primary"},on:{click:e.save}},[e._v("完成")]),e._v(" "),r("el-button",{staticClass:"m-t",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交审核")])],1),e._v(" "),r("el-dialog",{attrs:{visible:e.serviceFormVisible,title:"新增推荐活动"},on:{"update:visible":function(t){e.serviceFormVisible=t}}},[r("el-form",{ref:"wareForm",staticClass:"form-item-width",attrs:{model:e.wareForm,rules:e.rules,"label-width":"110px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"活动名称",prop:"wareName"}},[r("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.wareForm.wareName,callback:function(t){e.wareForm.wareName=t},expression:"wareForm.wareName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"缩略名",prop:"briefName"}},[r("el-input",{attrs:{placeholder:"缩略名"},model:{value:e.wareForm.briefName,callback:function(t){e.wareForm.briefName=t},expression:"wareForm.briefName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建议售价",prop:"suggestedPrice"}},[r("el-input",{attrs:{placeholder:"建议售价"},model:{value:e.wareForm.suggestedPrice,callback:function(t){e.wareForm.suggestedPrice=e._n(t)},expression:"wareForm.suggestedPrice"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"关键字",prop:"keyWords"}},[r("el-input",{attrs:{placeholder:"关键字以英文逗号分隔"},model:{value:e.wareForm.keyWords,callback:function(t){e.wareForm.keyWords=t},expression:"wareForm.keyWords"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"活动描述：",prop:"wareDesc"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.wareForm.wareDesc,callback:function(t){e.wareForm.wareDesc=t},expression:"wareForm.wareDesc"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",slot:"footer"},[r("el-button",{on:{click:function(t){e.serviceFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=14.07e8459c1a9083769460.js.map