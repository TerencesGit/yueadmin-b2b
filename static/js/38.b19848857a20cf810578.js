webpackJsonp([38],{745:function(t,e,a){a(946);var l=a(10)(a(829),a(998),"data-v-478e8713",null);t.exports=l.exports},829:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a(337),r=function(t){return t&&t.__esModule?t:{default:t}}(l),i=a(70);e.default={data:function(){return{filter:{templateName:"",currPage:1,pageSize:20},count:0,loading:!1,attributeList:[{attributeId:100001,attributeName:"大交通"},{attributeId:100002,attributeName:"商品介绍"},{attributeId:100003,attributeName:"费用说明"}],templateAttrList:[],templateFormVisible:!1,templateFormTitle:"",templateForm:{templateId:"",templateName:"",attributeIdList:[],description:"",htmlName:"",status:1},rules:{templateName:[{required:!0,message:"请输入模板名称",trigger:"blur"}],attributeIdList:[{required:!0,type:"array",message:"请选择属性",trigger:"blur"}],description:[{required:!0,message:"请输入模板描述",trigger:"blur"}],htmlName:[{required:!0,message:"请输入模板页面",trigger:"blur"}]},templateList:[{templateId:100001,templateName:"模板1",htmlName:"模板页面1",createTime:new Date,status:1,attributeNameList:[]},{templateId:100002,templateName:"模板2",htmlName:"模板页面2",createTime:new Date,status:0,attributeNameList:[{attributeId:100002,attributeName:"商品介绍"},{attributeId:100003,attributeName:"费用说明"}]}]}},methods:{formatStatus:function(t){return 1===t.status?"启用":"禁用"},getAttributeList:function(){var t=this;this.loading=!0;var e=(0,r.default)({},this.filter);(0,i.readAttributeList)(e).then(function(e){console.log(e),"0001"===e.data.code?(t.attributeList=e.data.result.defineList,t.count=e.data.result.pageInfo.count):t.$message(e.data.message),t.loading=!1}).catch(function(e){t.catchError(e.response),t.loading=!1})},getTemplateList:function(){var t=this;this.loading=!0;var e=(0,r.default)({},this.filter);(0,i.readTemplateList)(e).then(function(e){console.log(e),"0001"===e.data.code?(t.templateList=e.data.result.templateList,t.count=e.data.result.pageInfo.count):t.$message(e.data.message),t.loading=!1}).catch(function(e){t.catchError(e.response),t.loading=!1})},handleChange:function(t){console.log(t)},handleAdd:function(){this.submitType=1,this.templateFormTitle="新增属性模板",this.templateForm={templateId:"",templateName:"",attributeIdList:[],description:"",htmlName:"",status:1},this.templateFormVisible=!0},handleEdit:function(t){this.submitType=2,this.templateFormTitle="编辑属性模板",this.templateForm={templateId:t.templateId,templateName:t.templateName,attributeIdList:t.attributeNameList.map(function(t){return t.attributeId}),description:t.description,htmlName:t.htmlName,htmlId:t.htmlId,status:t.status},this.templateFormVisible=!0},submitForm:function(){var t=this;this.$refs.templateForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=(0,r.default)({},t.templateForm);if(console.log(a),1===t.submitType)(0,i.createTemplate)(a).then(function(e){"0001"===e.data.code?(t.$message.success(e.data.message),t.getTemplateList()):t.$message.error(e.data.message),t.templateFormVisible=!1}).catch(function(e){t.catchError(e.response),t.templateFormVisible=!1});else{if(2!==t.submitType)return;(0,i.updateTemplate)(a).then(function(e){"0001"===e.data.code?(t.$message.success(e.data.message),t.getTemplateList()):t.$message.error(e.data.message),t.templateFormVisible=!1}).catch(function(e){t.catchError(e.response),t.templateFormVisible=!1})}})},handleExpand:function(t,e){},handleDelete:function(t){var e=this;this.$confirm("确认要删除该模板？","提示",{type:"warning"}).then(function(){var a={templateId:t.templateId};console.log(a),(0,i.deleteTemplate)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.getTemplateList()):e.$message.error(t.data.message)}).catch(function(t){e.catchError(t.response)})}).catch(function(){e.$message("已取消操作")})},handleSizeChange:function(t){this.filter.pageSize=t,this.getTemplateList()},handleCurrentChange:function(t){this.filter.currPage=t,this.getTemplateList()}},created:function(){this.getAttributeList(),this.getTemplateList()}}},901:function(t,e,a){e=t.exports=a(722)(),e.push([t.i,".table-expand[data-v-478e8713]{font-size:0}.table-expand label[data-v-478e8713]{width:120px;color:#99a9bf}.table-expand .el-form-item[data-v-478e8713]{width:50%;margin-right:0;margin-bottom:0}.table-expand .el-form-item .el-form-item__label[data-v-478e8713]{width:120px;color:#99a9bf}.table-expand .el-form-item .el-tag[data-v-478e8713]{margin-right:10px}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/admin/system/templateManage.vue"],names:[],mappings:"AACA,+BACE,WAAa,CACd,AACD,qCACI,YAAa,AACb,aAAe,CAClB,AACD,6CACI,UAAW,AACX,eAAgB,AAChB,eAAiB,CACpB,AACD,kEACM,YAAa,AACb,aAAe,CACpB,AACD,qDACM,iBAAmB,CACxB",file:"templateManage.vue",sourcesContent:["\n.table-expand[data-v-478e8713] {\n  font-size: 0;\n}\n.table-expand label[data-v-478e8713] {\n    width: 120px;\n    color: #99a9bf;\n}\n.table-expand .el-form-item[data-v-478e8713] {\n    width: 50%;\n    margin-right: 0;\n    margin-bottom: 0;\n}\n.table-expand .el-form-item .el-form-item__label[data-v-478e8713] {\n      width: 120px;\n      color: #99a9bf;\n}\n.table-expand .el-form-item .el-tag[data-v-478e8713] {\n      margin-right: 10px;\n}\n"],sourceRoot:""}])},946:function(t,e,a){var l=a(901);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a(723)("77fbedf7",l,!0)},998:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"toolbar"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"模板名称"}},[a("el-input",{attrs:{placeholder:"输入模板名称搜索"},model:{value:t.filter.templateName,callback:function(e){t.filter.templateName=e},expression:"filter.templateName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getTemplateList}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增模板")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.templateList},on:{expand:t.handleExpand}},[a("el-table-column",{attrs:{type:"expand",width:"50",label:"属性名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{inline:"","label-position":"left"}},[a("el-form-item",{attrs:{label:"模板名称"}},[a("span",[t._v(t._s(e.row.templateName))])]),t._v(" "),a("el-form-item",{attrs:{label:"模板页面名称"}},[a("span",[t._v(t._s(e.row.htmlName))])]),t._v(" "),a("el-form-item",{attrs:{label:"模板描述"}},[a("span",[t._v(t._s(e.row.description))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(e.row.createTime))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[t._v(t._s(e.row.createBy))])]),t._v(" "),a("el-form-item",{attrs:{label:"模板属性"}},t._l(e.row.attributeNameList,function(e,l){return a("span",{key:l},[a("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.attributeName)}})],1)}))],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"templateName",label:"模板名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htmlName",label:"模板页面名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createBy",label:"创建人"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.formatStatus,prop:"status",label:"状态",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-row",{staticClass:"toolbar"},[a("el-pagination",{attrs:{"current-page":t.filter.currPage,"page-sizes":[10,20,30,40],"page-size":t.filter.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.templateFormTitle,visible:t.templateFormVisible},on:{"update:visible":function(e){t.templateFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:16,offset:4}},[a("el-form",{ref:"templateForm",attrs:{model:t.templateForm,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模板名称：",prop:"templateName"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.templateForm.templateName,callback:function(e){t.templateForm.templateName=e},expression:"templateForm.templateName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板页面：",prop:"htmlName"}},[a("el-input",{attrs:{placeholder:"请输入模板页面名"},model:{value:t.templateForm.htmlName,callback:function(e){t.templateForm.htmlName=e},expression:"templateForm.htmlName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板属性：",prop:"attributeIdList"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择属性(可多选)"},on:{change:t.handleChange},model:{value:t.templateForm.attributeIdList,callback:function(e){t.templateForm.attributeIdList=e},expression:"templateForm.attributeIdList"}},t._l(t.attributeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.attributeName,value:t.attributeId}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入模板描述"},model:{value:t.templateForm.description,callback:function(e){t.templateForm.description=e},expression:"templateForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status"}},[a("el-radio-group",{model:{value:t.templateForm.status,callback:function(e){t.templateForm.status=t._n(e)},expression:"templateForm.status"}},[a("el-radio",{attrs:{label:1}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("禁用")])],1)],1)],1)],1)],1),t._v(" "),a("div",{slot:"footer"},[a("el-button",{on:{click:function(e){t.templateFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=38.b19848857a20cf810578.js.map