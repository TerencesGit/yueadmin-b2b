webpackJsonp([17],{1318:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(339),i=function(t){return t&&t.__esModule?t:{default:t}}(a),o=s(52);e.default={data:function(){return{wareId:"",skuList:[],batchInitVisible:!1,batchSetVisible:!1,singleSetVisible:!1,singleForm:{skuId:"",skuDate:"",storageNum:"",skuNum:100,skuType:1},batchForm:{skuNum:100,skuType:1,skuDateRange:[]},rules:{skuNum:[{type:"number",required:!0,message:"库存数量不能为空",trigger:"blur"}],skuDateRange:[{type:"array",required:!0,message:"日期不能为空",trigger:"change"}]},pickerOptions:{shortcuts:[{text:"未来一周",onClick:function(t){var e=new Date,s=new Date;e.setTime(s.getTime()+6048e5),t.$emit("pick",[s,e])}},{text:"未来一个月",onClick:function(t){var e=new Date,s=new Date;e.setTime(s.getTime()+2592e6),t.$emit("pick",[s,e])}},{text:"未来三个月",onClick:function(t){var e=new Date,s=new Date;e.setTime(s.getTime()+7776e6),t.$emit("pick",[s,e])}}]}}},methods:{getStockList:function(){var t=this,e={wareId:this.wareId};(0,o.readSkuInfoList)(e).then(function(e){if(console.log(e),"0001"===e.data.code){if(t.skuList=e.data.result.skuList,0===t.skuList.length)return void t.$message.warning("暂无库存，无法操作");t.skuList.forEach(function(t){t.start=t.skuDate})}else t.$message.error(e.data.message)}).catch(function(t){console.log(t)})},dateChange:function(t){this.batchForm.skuDateRange=t?t.split(" - "):[]},changeMonth:function(t,e,s){},handleBatchInit:function(){this.batchForm.skuNum=100,this.batchForm.skuDateRange=[],this.batchInitVisible=!0},handleBatchSet:function(){this.batchForm.skuNum=100,this.batchForm.skuDateRange=[],this.batchSetVisible=!0},dayClick:function(t,e){e&&(this.singleForm=(0,i.default)(this.singleForm,e),this.singleForm.skuNum=100,this.singleSetVisible=!0)},batchInitSubmit:function(){var t=this;this.$refs.batchForm.validate(function(e){if(e){var s={wareId:t.wareId,startDate:t.batchForm.skuDateRange[0],endDate:t.batchForm.skuDateRange[1],skuNum:t.batchForm.skuNum,skuType:t.batchForm.skuType};console.log(s),(0,o.outOrInStockList)(s).then(function(e){console.log(e),"0001"===e.data.code?(t.$message.success(e.data.message),t.getStockList()):t.$message.error(e.data.message),t.batchSetVisible=!1}).catch(function(e){console.log(e),t.$catchError(e)})}else console.log("err submit")})},batchSetSubmit:function(){var t=this;this.$refs.batchForm.validate(function(e){if(e){var s={wareId:t.wareId,startDate:t.batchForm.skuDateRange[0],endDate:t.batchForm.skuDateRange[1],skuNum:t.batchForm.skuNum,skuType:t.batchForm.skuType};console.log(s),(0,o.outOrInStockList)(s).then(function(e){console.log(e),"0001"===e.data.code?(t.$message.success(e.data.message),t.getStockList()):t.$message.error(e.data.message),t.batchSetVisible=!1}).catch(function(e){console.log(e),t.$catchError(e)})}else console.log("err submit")})},singleSetSubmit:function(){var t=this;if(2===this.singleForm.skuType&&this.singleForm.skuNum>this.singleForm.storageNum)return this.$notify.error({title:"错误",message:"出库数量不得超过当前库存"}),!1;var e={skuId:this.singleForm.skuId,skuNum:this.singleForm.skuNum,skuType:this.singleForm.skuType};(0,o.outOrInStock)(e).then(function(e){console.log(e),"0001"===e.data.code?(t.$message.success(e.data.message),t.getStockList()):t.$message.error(e.data.message),t.singleSetVisible=!1}).catch(function(t){console.log(t)})}},mounted:function(){this.wareId=this.$route.query.wareId,this.wareId&&this.getStockList()}}},1365:function(t,e,s){e=t.exports=s(736)(),e.push([t.i,".input-width-control .el-input[data-v-a0d8ee52]{width:220px}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/provider/ware/storageSet.vue"],names:[],mappings:"AACA,gDACE,WAAa,CACd",file:"storageSet.vue",sourcesContent:["\n.input-width-control .el-input[data-v-a0d8ee52] {\n  width: 220px;\n}\n"],sourceRoot:""}])},1411:function(t,e,s){var a=s(1365);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(737)("9786ecc2",a,!0)},1483:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("el-row",{staticClass:"toolbar"},[s("el-button",{attrs:{type:"primary",disabled:0===t.skuList.length},on:{click:t.handleBatchSet}},[t._v("批量操作")]),t._v(" "),s("back-button")],1),t._v(" "),s("full-calendar",{attrs:{events:t.skuList,"first-day":"0"},on:{changeMonth:t.changeMonth,dayClick:t.dayClick,eventClick:t.dayClick}}),t._v(" "),s("el-dialog",{attrs:{title:"库存初始化",visible:t.batchInitVisible},on:{"update:visible":function(e){t.batchInitVisible=e}}},[s("el-form",{ref:"batchForm",staticClass:"input-width-control",attrs:{model:t.batchForm,rules:t.rules,"label-width":"180px"}},[s("el-form-item",{attrs:{label:"起止日期：",prop:"skuDateRange"}},[s("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围","picker-options":t.pickerOptions},on:{change:t.dateChange},model:{value:t.batchForm.skuDateRange,callback:function(e){t.batchForm.skuDateRange=e},expression:"batchForm.skuDateRange"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"库存数量："}},[s("el-input-number",{staticStyle:{width:"220px"},attrs:{min:1,step:50},model:{value:t.batchForm.skuNum,callback:function(e){t.batchForm.skuNum=e},expression:"batchForm.skuNum"}})],1)],1),t._v(" "),s("div",{slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.batchInitSubmit}},[t._v("确定")]),t._v(" "),s("el-button",{on:{click:function(e){t.batchInitVisible=!1}}},[t._v("取消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"库存设置",visible:t.batchSetVisible},on:{"update:visible":function(e){t.batchSetVisible=e}}},[s("el-form",{ref:"batchForm",staticClass:"input-width-control",attrs:{model:t.batchForm,rules:t.rules,"label-width":"180px"}},[s("el-form-item",{attrs:{label:"起止日期：",prop:"skuDateRange"}},[s("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围","picker-options":t.pickerOptions},on:{change:t.dateChange},model:{value:t.batchForm.skuDateRange,callback:function(e){t.batchForm.skuDateRange=e},expression:"batchForm.skuDateRange"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"出/入库数量："}},[s("el-input-number",{staticStyle:{width:"220px"},attrs:{min:1,step:10},model:{value:t.batchForm.skuNum,callback:function(e){t.batchForm.skuNum=e},expression:"batchForm.skuNum"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"操作类型：",prop:"type"}},[s("el-radio-group",{model:{value:t.batchForm.skuType,callback:function(e){t.batchForm.skuType=e},expression:"batchForm.skuType"}},[s("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("入库")]),t._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:2}},[t._v("出库")])],1)],1)],1),t._v(" "),s("div",{slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.batchSetSubmit}},[t._v("确定")]),t._v(" "),s("el-button",{on:{click:function(e){t.batchSetVisible=!1}}},[t._v("取消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"库存设置",visible:t.singleSetVisible},on:{"update:visible":function(e){t.singleSetVisible=e}}},[s("el-form",{attrs:{model:t.singleForm,"label-width":"220px",rule:t.rules}},[s("el-form-item",{attrs:{label:"日期："}},[s("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.singleForm.skuDate))])]),t._v(" "),s("el-form-item",{attrs:{label:"当前库存："}},[s("span",[t._v(t._s(t.singleForm.storageNum))])]),t._v(" "),s("el-form-item",{attrs:{label:"出/入库数量：",prop:"stockNum"}},[s("el-input-number",{staticStyle:{width:"140px"},attrs:{min:1,step:10},model:{value:t.singleForm.skuNum,callback:function(e){t.singleForm.skuNum=e},expression:"singleForm.skuNum"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"操作类型：",prop:"type"}},[s("el-radio-group",{model:{value:t.singleForm.skuType,callback:function(e){t.singleForm.skuType=e},expression:"singleForm.skuType"}},[s("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("入库")]),t._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:2}},[t._v("出库")])],1)],1)],1),t._v(" "),s("div",{slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.singleSetSubmit}},[t._v("确定")]),t._v(" "),s("el-button",{on:{click:function(e){t.singleSetVisible=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}},799:function(t,e,s){s(1411);var a=s(7)(s(1318),s(1483),"data-v-a0d8ee52",null);t.exports=a.exports}});
//# sourceMappingURL=17.16fe05f83730014212a1.js.map