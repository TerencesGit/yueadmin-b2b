webpackJsonp([69],{1281:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(138),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(52);t.default={data:function(){return{strategyList:[],loading:!1,pageInfo:{count:0,currPage:1,pageSize:20,currentPage:1}}},methods:{handleSizeChange:function(e){this.getList(this.pageInfo.currPage,e)},handleCurrentChange:function(e){this.getList(e,this.pageInfo.pageSize)},deadlineDateTypeTxt:function(e){switch(e.deadlineDateType){case 1:return"出行日";case 2:return"拍摄日";case 3:return"付款日";case 4:return"不可退改";default:return"错误类型"}},handleEdit:function(e,t){var a={groupId:t.groupId+""};a=(0,r.default)(a),this.$router.push({path:"/admin/system/retreatStrategy/retreatStrategyEdit",query:{data:a}})},handleDelete:function(e,t){var a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.loading=!0;var e={groupId:t.groupId+""};e=(0,r.default)(e),console.log(e),(0,i.retreatStrategyDelete)(e).then(function(e){console.log(e),"0001"===e.data.code?(a.$message({message:"删除策略成功",type:"success"}),a.getList(),a.loading=!1):(a.$message({message:"删除策略失败",type:"warning"}),a.loading=!1)}).catch(function(e){console.log(e),a.$catchError(err),a.loading=!1})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.loading=!0;var n={currPage:t,pageSize:a};(0,i.retreatStrategyList)(n).then(function(t){"0001"===t.data.code?(console.log(t),e.loading=!1,e.strategyList=t.data.result.list,e.pageInfo=t.data.result.pageInfo):(e.$message({message:"获取列表失败，请稍后重试",type:"warning"}),e.loading=!1)}).catch(function(t){e.$catchError(t),e.loading=!1})}},created:function(){this.getList()}}},1477:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"retreatStrategyList"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.strategyList,border:""}},[a("el-table-column",{attrs:{prop:"groupId",label:"ID",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.deadlineDateTypeTxt,prop:"deadlineDateType",label:"退改协议类型",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reserve2",label:"策略名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-sizes":[10,20,30,40],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},762:function(e,t,a){var n=a(7)(a(1281),a(1477),null,null);e.exports=n.exports}});
//# sourceMappingURL=69.ce1b180052e73e5f4d21.js.map