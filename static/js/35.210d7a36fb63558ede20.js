webpackJsonp([35],{724:function(e,t,a){a(914);var s=a(10)(a(808),a(962),"data-v-2ccd20b0",null);e.exports=s.exports},808:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(329),r=s(i),l=a(330),o=s(l),n=a(70);t.default={data:function(){return{wareId:"",wareInfo:{},tripList:[],mediaList:[],skuList:[],attributeInfo:{},serviceList:[],serviceInfo:{},activityList:[],activityInfo:{},subWareSkuList:[],loading:!1,previewImgUrl:"",previewVisible:!1,storageVisible:!1,subInfoVisible:!1,verifyVisible:!1,verifyForm:{},rules:{verifyInfo:[{required:!0,message:"请填写驳回原因",trigger:"blur"},{minlength:10,message:"驳回原因不少于10个字符",trigger:"blur"}]}}},methods:{formatStatus:function(e){return 1===e.status?"是":"否"},formatIsMainPic:function(e,t){return 1===e.isMainPic?"是":"否"},formatCreateTime:function(e,t){return this.$moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")},viewImage:function(e){this.previewImgUrl=e,this.previewVisible=!0},handleClick:function(e,t){var a=this;if(this.loading=!0,0==e.index)return void(this.loading=!1);if(1==e.index)0!==this.tripList.length?this.loading=!1:(0,n.readTripDetailList)({wareId:this.wareId}).then(function(e){console.log(e),"0001"===e.data.code?(a.tripList=e.data.result.tripDetailList,a.tripList.forEach(function(e){switch(e.programType){case 1:e.programType="航班";break;case 2:e.programType="交通";break;case 10:e.programType="酒店";break;case 20:e.programType="景点";break;case 30:e.programType="早餐";break;case 31:e.programType="午餐";break;case 32:e.programType="下午茶";break;case 33:e.programType="晚餐";break;case 34:e.programType="宵夜";break;case 40:e.programType="购物";break;case 50:e.programType="自由活动";break;case 60:e.programType="主题活动";break;default:e.programType="自定义"}})):console.log(e.data.message),a.loading=!1}).catch(function(e){console.log(e),a.catchError(e.response),a.loading=!1});else if(2==e.index)0!==this.mediaList.length?this.loading=!1:(0,n.readWareFileList)({wareId:this.wareId}).then(function(e){console.log(e),"0001"===e.data.code?a.mediaList=e.data.result.fileList:console.log(e.data.message),a.loading=!1}).catch(function(e){console.log(e),a.catchError(e.response),a.loading=!1});else if(3==e.index)"{}"!==(0,o.default)(this.attributeInfo)?(this.loading=!1,console.log((0,o.default)(this.attributeInfo))):(console.log("readAttribute"),(0,n.readAttribute)({wareId:this.wareId}).then(function(e){console.log(e),"0001"===e.data.code?a.attributeInfo=e.data.result.AttributeInfo:a.$message.error(e.data.message)}).catch(function(e){console.log(e)}),this.loading=!1);else if(4==e.index)0!==this.skuList.length?this.loading=!1:(0,n.readSkuInfoList)({wareId:this.wareId}).then(function(e){console.log(e),"0001"===e.data.code?(a.skuList=e.data.result.skuList||[],a.skuList.forEach(function(e){e.start=e.skuDate})):a.$message.error(e.data.message),a.loading=!1}).catch(function(e){console.log(e),a.catchError(e.response),a.loading=!1});else if(5==e.index)0!==this.serviceList.length?this.loading=!1:(0,n.readWareService)({parentId:this.wareId}).then(function(e){console.log(e),"0001"===e.data.code?a.serviceList=e.data.result.wareServiceList:a.$message.error(e.data.message),a.loading=!1}).catch(function(e){console.log(e),a.catchError(e.response),a.loading=!1});else{if(6!=e.index)return!1;0!==this.activityList.length?this.loading=!1:(0,n.readWareActivity)({parentId:this.wareId}).then(function(e){console.log(e),"0001"===e.data.code?a.activityList=e.data.result.wareActivityList:a.$message.error(e.data.message),a.loading=!1}).catch(function(e){console.log(e),a.catchError(e.response),a.loading=!1})}},getWareInfo:function(){var e=this;(0,n.readWareInfo)({wareId:this.wareId}).then(function(t){if(console.log(t),"0001"===t.data.code){var a=t.data.result.wareInfo;a.openDate=new Date(a.openDate),a.closeDate=new Date(a.closeDate),e.wareInfo=a}else e.$message.error(t.data.message)}).catch(function(t){console.log(t),e.catchError(t.response)})},changeMonth:function(e,t,a){},showDetail:function(e){this.serviceInfo=(0,r.default)({},e),this.subInfoVisible=!0},showStorage:function(e){var t=this;console.log(e),(0,n.readSkuInfoList)({wareId:e}).then(function(e){console.log(e),"0001"===e.data.code?(t.subWareSkuList=e.data.result.skuList||[],t.subWareSkuList.forEach(function(e){e.start=e.skuDate})):t.$message.error(e.data.message)}).catch(function(e){console.log(e),t.catchError(e.response)}),this.storageVisible=!0},setPrice:function(){this.$router.push({path:"/admin/ware/priceSet?wareId="+this.wareId})},verifyPass:function(){var e=this;this.$confirm("确定该商品通过审核？","商品审核",{type:"warning"}).then(function(){var t={wareId:e.wareId,verifyInfo:"",verifyStatus:2};console.log(t),(0,n.verifyWareInfo)(t).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.$route.back()):e.$message.error(t.data.message)}).catch(function(e){console.log(e)}),e.$router.back()}).catch(function(){e.$message("已取消操作")})},verifyFail:function(){var e=this;this.$refs.verifyForm.validate(function(t){if(t){var a={wareId:e.wareId,verifyInfo:e.verifyForm.verifyInfo,verifyStatus:3};console.log(a),(0,n.verifyWareInfo)(a).then(function(t){console.log(t),"0001"===t.data.code?(e.$message.success(t.data.message),e.$router.push("/admin/ware/verifyList")):e.$message.error(t.data.message),e.verifyForm.verifyInfo=""}).catch(function(t){console.log(t),e.catchError(t.response)}),e.verifyVisible=!1}else console.log("err submit")})}},mounted:function(){this.wareId=parseInt(this.$route.query.wareId),this.wareId&&this.getWareInfo()}}},869:function(e,t,a){t=e.exports=a(696)(),t.push([e.i,".el-card[data-v-2ccd20b0]{margin:15px;padding:0}.detail-list[data-v-2ccd20b0]{margin-left:15px}.detail-list li[data-v-2ccd20b0]{margin:15px 0}.detail-list li label[data-v-2ccd20b0]{display:inline-block;width:100px}.detail-list.label-control label[data-v-2ccd20b0]{width:160px}.trip-list[data-v-2ccd20b0]{margin-top:15px}","",{version:3,sources:["D:/B2B-YueProject/yueadmin-b2b/src/pages/admin/ware/verifyDetail.vue"],names:[],mappings:"AACA,0BACE,YAAa,AACb,SAAW,CACZ,AACD,8BACE,gBAAkB,CACnB,AACD,iCACI,aAAe,CAClB,AACD,uCACM,qBAAsB,AACtB,WAAa,CAClB,AACD,kDACI,WAAa,CAChB,AACD,4BACE,eAAiB,CAClB",file:"verifyDetail.vue",sourcesContent:["\n.el-card[data-v-2ccd20b0] {\n  margin: 15px;\n  padding: 0;\n}\n.detail-list[data-v-2ccd20b0] {\n  margin-left: 15px;\n}\n.detail-list li[data-v-2ccd20b0] {\n    margin: 15px 0;\n}\n.detail-list li label[data-v-2ccd20b0] {\n      display: inline-block;\n      width: 100px;\n}\n.detail-list.label-control label[data-v-2ccd20b0] {\n    width: 160px;\n}\n.trip-list[data-v-2ccd20b0] {\n  margin-top: 15px;\n}\n"],sourceRoot:""}])},914:function(e,t,a){var s=a(869);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(697)("070959bf",s,!0)},962:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"primary"},on:{click:e.setPrice}},[e._v("设置价格")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.verifyPass}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.verifyVisible=!0}}},[e._v("驳回")])],1),e._v(" "),a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-t",attrs:{type:"border-card"},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("span",{slot:"label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 基本信息")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("ul",{staticClass:"detail-list"},[a("li",[a("label",[e._v("商品名称：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.wareName))])]),e._v(" "),a("li",[a("label",[e._v("商品品牌：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.brandName))])]),e._v(" "),a("li",[a("label",[e._v("商品缩略名：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.briefName))])]),e._v(" "),a("li",[a("label",[e._v("商品关键字：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.keyWords))])])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("ul",{staticClass:"detail-list"},[a("li",[a("label",[e._v("出发城市：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.srcCityName))])]),e._v(" "),a("li",[a("label",[e._v("目的城市：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.dstCityName))])]),e._v(" "),a("li",[a("label",[e._v("起售时间：")]),e._v(" "),a("span",[e._v(e._s(e._f("DateTimeFormat")(e.wareInfo.openDate)))])]),e._v(" "),a("li",[a("label",[e._v("停售时间：")]),e._v(" "),a("span",[e._v(e._s(e._f("DateTimeFormat")(e.wareInfo.closeDate)))])])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("ul",{staticClass:"detail-list label-control"},[a("li",[a("label",[e._v("行程天数：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.tripDays)+"天")])]),e._v(" "),a("li",[a("label",[e._v("建议售价：")]),e._v(" "),a("span",[e._v(e._s(e._f("currency")(e.wareInfo.suggestedPrice))+"元")])]),e._v(" "),a("li",[a("label",[e._v("至少提前多少天购买：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.sellPreDays)+"天")])]),e._v(" "),a("li",[a("label",[e._v("无订金订单占位时长：")]),e._v(" "),a("span",[e._v(e._s(e.wareInfo.nocashReserveMinute/60)+"小时")])])])])],1),e._v(" "),a("el-row",[a("h3",[e._v("推荐概述")]),e._v(" "),a("div",{staticStyle:{margin:"15px"},domProps:{innerHTML:e._s(e.wareInfo.wareDesc)}})])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"行程介绍"}},[a("span",{slot:"label"},[a("i",{staticClass:"fa fa-cab"}),e._v(" 行程介绍")]),e._v(" "),a("ul",{staticClass:"trip-content"},e._l(e.wareInfo.tripDays,function(t){return a("li",{key:t},[a("el-card",{staticClass:"trip-day"},[a("h4",[e._v("第"+e._s(t)+"天")]),e._v(" "),a("ul",{staticClass:"trip-list"},[a("li",[a("table",{staticClass:"table"},[a("thead",[a("th",[e._v("行程时间")]),e._v(" "),a("th",[e._v("行程标题")]),e._v(" "),a("th",[e._v("行程类型")]),e._v(" "),a("th",[e._v("行程时长（分钟）")]),e._v(" "),a("th",[e._v("行程明细")]),e._v(" "),a("th",[e._v("是否免费")])]),e._v(" "),a("tbody",e._l(e.tripList,function(s){return s.tripDayNum===t&&s.id?a("tr",[a("td",[e._v(e._s(e._f("TimeFormat")(s.programTime)))]),e._v(" "),a("td",[e._v(e._s(s.programTitle))]),e._v(" "),a("td",[e._v(e._s(s.programType))]),e._v(" "),a("td",[e._v(e._s(s.programDuration))]),e._v(" "),a("td",[e._v(e._s(s.programDetail))]),e._v(" "),a("td",[e._v(e._s(0===s.programIsFree?"是":"否"))])]):e._e()}))])])])])],1)}))]),e._v(" "),a("el-tab-pane",{attrs:{label:"多媒体"}},[a("span",{slot:"label"},[a("i",{staticClass:"fa fa-image"}),e._v(" 多媒体")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.mediaList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片缩略图",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticClass:"cell-img",attrs:{src:t.row.filePath,height:"50px"},on:{click:function(a){e.viewImage(t.row.filePath)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新者",prop:"createName",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",prop:"createTime",formatter:e.formatCreateTime,sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"是否为主图",prop:"isMainPic",width:"120",formatter:e.formatIsMainPic}}),e._v(" "),a("el-table-column",{attrs:{label:"是否显示",prop:"status",width:"120",formatter:e.formatStatus}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"费用/预定限制"}},[a("span",{slot:"label"},[a("i",{staticClass:"fa fa-money"}),e._v(" 费用/预定限制")]),e._v(" "),a("div",{staticClass:"pane-content"},[a("el-card",[a("div",{staticClass:"clearfix",slot:"header"},[a("span",{staticClass:"title"},[e._v("商品介绍")])]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.attributeInfo.introduce)}})]),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",slot:"header"},[a("span",{staticClass:"title"},[e._v("费用说明")])]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.attributeInfo.charge)}})]),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",slot:"header"},[a("span",{staticClass:"title"},[e._v("使用说明")])]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.attributeInfo.explains)}})]),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",slot:"header"},[a("span",{staticClass:"title"},[e._v("购买须知")])]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.attributeInfo.notice)}})])],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"价格库存"}},[a("full-calendar",{attrs:{events:e.skuList,"first-day":"0"},on:{changeMonth:e.changeMonth}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"附加服务"}},[a("el-table",{attrs:{data:e.serviceList,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareCode",label:"服务ID",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareName",label:"服务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareDesc",label:"服务描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"详情",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.showDetail(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.showStorage(t.row.wareId)}}},[e._v("价格库存")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"推荐活动"}},[a("el-table",{attrs:{data:e.activityList,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareCode",label:"活动ID",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareName",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wareDesc",label:"活动描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"详情",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.showDetail(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.showStorage(t.row.wareId)}}},[e._v("价格库存")])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.previewVisible,size:"tiny"},on:{"update:visible":function(t){e.previewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.previewImgUrl}})]),e._v(" "),a("el-dialog",{attrs:{visible:e.subInfoVisible,title:"附加服务"},on:{"update:visible":function(t){e.subInfoVisible=t}}},[a("el-form",{attrs:{model:e.serviceInfo,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"服务名称："}},[a("span",[e._v(e._s(e.serviceInfo.wareName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"缩略名："}},[a("span",[e._v(e._s(e.serviceInfo.briefName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"建议售价："}},[a("span",[e._v(e._s(e.serviceInfo.suggestedPrice))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"关键字："}},[a("span",[e._v(e._s(e.serviceInfo.keyWords))])])],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"服务描述："}},[a("span",[e._v(e._s(e.serviceInfo.wareDesc))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subInfoVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.storageVisible,size:"large"},on:{"update:visible":function(t){e.storageVisible=t}}},[a("full-calendar",{attrs:{events:e.subWareSkuList,"first-day":"0"},on:{changeMonth:e.changeMonth}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.verifyVisible,title:"商品驳回"},on:{"update:visible":function(t){e.verifyVisible=t}}},[a("el-form",{ref:"verifyForm",attrs:{model:e.verifyForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"",prop:"verifyInfo"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"填写驳回原因"},model:{value:e.verifyForm.verifyInfo,callback:function(t){e.verifyForm.verifyInfo=t},expression:"verifyForm.verifyInfo"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right",attrs:{label:""}},[a("el-button",{on:{click:function(t){e.verifyVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.verifyFail}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=35.210d7a36fb63558ede20.js.map